function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO;a=self;b=a.Task1XKQCNV=a.Task1XKQCNV||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.Var$1=f.Var$1||{};h=f.Var=f.Var||{};i=d.Operators=d.Operators||{};j=d.Unchecked=d.Unchecked||{};k=d.JavaScript=d.JavaScript||{};l=k.JS=k.JS||{};m=f.Templating=f.Templating||{};n=m.Runtime=m.Runtime||{};o=n.Server=n.Server||{};p=o.TemplateInstance=o.TemplateInstance||{};q=d.Arrays=d.Arrays||{};r=o.ProviderBuilder=o.ProviderBuilder||{};s=o.Handler=o.Handler||{};t=a.Task1XKQCNV_Templates=a.Task1XKQCNV_Templates||{};u=f.ConcreteVar=f.ConcreteVar||{};v=f.Snap=f.Snap||{};w=k.Pervasives=k.Pervasives||{};x=a.System=a.System||{};y=x.Guid=x.Guid||{};z=d.Collections=d.Collections||{};A=z.List=z.List||{};B=f.Client=f.Client||{};C=B.Templates=B.Templates||{};D=f.Doc=f.Doc||{};E=f.Abbrev=f.Abbrev||{};F=E.Fresh=E.Fresh||{};G=z.Dictionary=z.Dictionary||{};H=a.Object;I=z.HashSet=z.HashSet||{};J=d.Seq=d.Seq||{};K=o.TemplateInitializer=o.TemplateInitializer||{};L=a.EventTarget;M=a.Node;N=f.View=f.View||{};O=d.Numeric=d.Numeric||{};P=f.AttrProxy=f.AttrProxy||{};Q=f.CheckedInput=f.CheckedInput||{};R=z.DictionaryUtil=z.DictionaryUtil||{};S=d.Enumerator=d.Enumerator||{};T=S.T=S.T||{};U=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};V=a.WindowOrWorkerGlobalScope;W=f.Docs=f.Docs||{};X=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};Y=f.DocElemNode=f.DocElemNode||{};Z=a.CharacterData;_0=f.Elt=f.Elt||{};_1=C.Prepare=C.Prepare||{};_2=d.Slice=d.Slice||{};_3=f.DomUtility=f.DomUtility||{};_4=z.KeyCollection=z.KeyCollection||{};_5=f.An=f.An||{};_6=B.Settings=B.Settings||{};_7=E.Mailbox=E.Mailbox||{};_8=B.Attrs=B.Attrs||{};_9=_8.Dyn=_8.Dyn||{};_=f.Attrs=f.Attrs||{};$=f.AttrModule=f.AttrModule||{};ba=d.List=d.List||{};bb=ba.T=ba.T||{};bc=d.Strings=d.Strings||{};bd=f.Array=f.Array||{};be=f.Updates=f.Updates||{};bf=z.ValueCollection=z.ValueCollection||{};bg=B.Docs=B.Docs||{};bh=bg.RunState=bg.RunState||{};bi=bg.NodeSet=bg.NodeSet||{};bj=d.Concurrency=d.Concurrency||{};bk=f.Anims=f.Anims||{};bl=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bm=z.HashSetUtil=z.HashSetUtil||{};bn=f.BindVar=f.BindVar||{};bo=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bp=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bq=f.AppendList=f.AppendList||{};br=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bs=f.DynamicAttrNode=f.DynamicAttrNode||{};bt=bj.Scheduler=bj.Scheduler||{};bu=f.Easing=f.Easing||{};bv=bj.AsyncBody=bj.AsyncBody||{};bw=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bx=bj.CT=bj.CT||{};by=E.HashSet=E.HashSet||{};bz=f.String=f.String||{};bA=d.CancellationTokenSource=d.CancellationTokenSource||{};bB=bg.DomNodes=bg.DomNodes||{};bC=d.Char=d.Char||{};bD=a.Error;bE=d.OperationCanceledException=d.OperationCanceledException||{};bF=d.Lazy=d.Lazy||{};bG=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bH=d.Queue=d.Queue||{};bI=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bJ=bI.LazyRecord=bI.LazyRecord||{};bK=a.Math;bL=a.IntelliFactory;bM=bL&&bL.Runtime;bN=a.console;bO=a.Date;c.Main=function(){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci;function cj(){bP.Set("0");}function ck(){bQ.Set("");}function cl(){bR.Set("=");}function cm(cp){if(cp===-1){if(j.Equals(bP.Get().indexOf(".")!=-1,false))bP.Set(bP.Get()+".");}else if(bP.Get()!=="0"&&cp===0)bP.Set(bP.Get()+"0");else if(bP.Get()==="0")bP.Set(a.String(cp));else bP.Set(bP.Get()+a.String(cp));}function cn(){bQ.Set(bP.Get());}function co(cp){var cq,cr,cs,ct,cu,cv,cw;cp==="="?cn():void 0;cp==="+"?bQ.Get()===""?cn():bQ.Set((cq=a.Number(bQ.Get())+a.Number(bP.Get()),a.String(cq))):void 0;cp==="-"?bQ.Get()===""?cn():bQ.Set((cr=a.Number(bQ.Get())-a.Number(bP.Get()),a.String(cr))):void 0;cp==="*"?bQ.Get()===""?cn():bQ.Set((cs=a.Number(bQ.Get())*a.Number(bP.Get()),a.String(cs))):void 0;cp==="/"?(bQ.Get()===""?cn():bQ.Set((ct=a.Number(bQ.Get())/a.Number(bP.Get()),a.String(ct))),bQ.Get()==="Infinity"?a.alert(function(cx){return cx("Nem lehet null\ufffdval osztani!");}(a.id)):void 0):void 0;cp==="Sin"?(bQ.Get()===""?cn():void 0,bQ.Set((cu=bK.sin(a.Number(bQ.Get())),a.String(cu))),cl()):void 0;cp==="Cos"?(bQ.Get()===""?cn():void 0,bQ.Set((cv=bK.cos(a.Number(bQ.Get())),a.String(cv))),cl()):void 0;cp==="1/x"?(bQ.Get()===""?cn():void 0,bQ.Set((cw=1/a.Number(bQ.Get()),a.String(cw))),cl()):void 0;cp!==""?cj():void 0;bQ.Get()==="NaN"?a.alert(function(cx){return cx("Hiba - Nincs eredm\ufffdnye a sz\ufffdmol\ufffdsnak!");}(a.id)):void 0;}bP=g.Create$1("0");bQ=g.Create$1("");bR=g.Create$1("=");bS=(bT=(bU=(bV=(bW=(bX=(bY=(bZ=(b0=(b1=(b2=(b3=(b4=(b5=(b6=(b7=(b8=(b9=(b_=(b$=(ca=(cb=(cc=(cd=(ce=(cf=(cg=new r.New$1(),(cg.h.push({$:8,$0:"input",$1:bP}),cg)),(cf.h.push({$:8,$0:"inputresult",$1:bQ}),cf)),(ce.h.push({$:8,$0:"equation",$1:bR}),ce)),(cd.h.push(s.EventQ2(cd.k,"clear",function(){return cd.i;},function(){cj();})),cd)),(cc.h.push(s.EventQ2(cc.k,"allclear",function(){return cc.i;},function(){cl();cj();ck();})),cc)),(cb.h.push(s.EventQ2(cb.k,"copyresult",function(){return cb.i;},function(){bP.Set(bQ.Get());})),cb)),(ca.h.push(s.EventQ2(ca.k,"add_comma",function(){return ca.i;},function(){cm(-1);})),ca)),(b$.h.push(s.EventQ2(b$.k,"add_0",function(){return b$.i;},function(){cm(0);})),b$)),(b_.h.push(s.EventQ2(b_.k,"add_1",function(){return b_.i;},function(){cm(1);})),b_)),(b9.h.push(s.EventQ2(b9.k,"add_2",function(){return b9.i;},function(){cm(2);})),b9)),(b8.h.push(s.EventQ2(b8.k,"add_3",function(){return b8.i;},function(){cm(3);})),b8)),(b7.h.push(s.EventQ2(b7.k,"add_4",function(){return b7.i;},function(){cm(4);})),b7)),(b6.h.push(s.EventQ2(b6.k,"add_5",function(){return b6.i;},function(){cm(5);})),b6)),(b5.h.push(s.EventQ2(b5.k,"add_6",function(){return b5.i;},function(){cm(6);})),b5)),(b4.h.push(s.EventQ2(b4.k,"add_7",function(){return b4.i;},function(){cm(7);})),b4)),(b3.h.push(s.EventQ2(b3.k,"add_8",function(){return b3.i;},function(){cm(8);})),b3)),(b2.h.push(s.EventQ2(b2.k,"add_9",function(){return b2.i;},function(){cm(9);})),b2)),(b1.h.push(s.EventQ2(b1.k,"calculate",function(){return b1.i;},function(){co(bR.Get());bR.Set("=");})),b1)),(b0.h.push(s.EventQ2(b0.k,"plus",function(){return b0.i;},function(){co(bR.Get());bR.Set("+");})),b0)),(bZ.h.push(s.EventQ2(bZ.k,"minus",function(){return bZ.i;},function(){co(bR.Get());bR.Set("-");})),bZ)),(bY.h.push(s.EventQ2(bY.k,"multiplication",function(){return bY.i;},function(){co(bR.Get());bR.Set("*");})),bY)),(bX.h.push(s.EventQ2(bX.k,"division",function(){return bX.i;},function(){co(bR.Get());bR.Set("/");})),bX)),(bW.h.push(s.EventQ2(bW.k,"sin",function(){return bW.i;},function(){bR.Set("Sin");co(bR.Get());})),bW)),(bV.h.push(s.EventQ2(bV.k,"cos",function(){return bV.i;},function(){bR.Set("Cos");co(bR.Get());})),bV)),(bU.h.push(s.EventQ2(bU.k,"multiplicativeinverse",function(){return bU.i;},function(){bR.Set("1/x");co(bR.Get());})),bU)),(ch=s.CompleteHoles(bT.k,bT.h,[["input",0],["equation",0],["inputresult",0]]),(ci=new p.New(ch[1],t.main(ch[0])),bT.i=ci,ci))).get_Doc();C.LoadLocalTemplates("");D.RunById("main",bS);};e=d.Obj=bM.Class({Equals:function(bP){return this===bP;},GetHashCode:function(){return -1;}},null,e);e.New=bM.Ctor(function(){},e);g=f.Var$1=bM.Class({},e,g);g.Create$1=function(bP){return new u.New(false,v.New({$:2,$0:bP,$1:[]}),bP);};h=f.Var=bM.Class({},e,h);h.New=bM.Ctor(function(){e.New.call(this);},h);i.FailWith=function(bP){throw new bD(bP);};i.KeyValue=function(bP){return[bP.K,bP.V];};j.Equals=function(bP,bQ){var bR,bS,bT,bU;if(bP===bQ)return true;else{bR=typeof bP;if(bR=="object"){if(bP===null||bP===void 0||bQ===null||bQ===void 0)return false;else if("Equals"in bP)return bP.Equals(bQ);else if(bP instanceof a.Array&&bQ instanceof a.Array)return j.arrayEquals(bP,bQ);else if(bP instanceof a.Date&&bQ instanceof a.Date)return j.dateEquals(bP,bQ);else{bS=[true];for(var bV in bP)if(function(bW){bS[0]=!bP.hasOwnProperty(bW)||bQ.hasOwnProperty(bW)&&j.Equals(bP[bW],bQ[bW]);return!bS[0];}(bV))break;if(bS[0]){for(var bW in bQ)if(function(bX){bS[0]=!bQ.hasOwnProperty(bX)||bP.hasOwnProperty(bX);return!bS[0];}(bW))break;}return bS[0];}}else return bR=="function"&&("$Func"in bP?bP.$Func===bQ.$Func&&bP.$Target===bQ.$Target:"$Invokes"in bP&&"$Invokes"in bQ&&j.arrayEquals(bP.$Invokes,bQ.$Invokes));}};j.arrayEquals=function(bP,bQ){var bR,bS;if(q.length(bP)===q.length(bQ)){bR=true;bS=0;while(bR&&bS<q.length(bP)){!j.Equals(q.get(bP,bS),q.get(bQ,bS))?bR=false:void 0;bS=bS+1;}return bR;}else return false;};j.dateEquals=function(bP,bQ){return bP.getTime()===bQ.getTime();};j.Hash=function(bP){var bQ;bQ=typeof bP;return bQ=="function"?0:bQ=="boolean"?bP?1:0:bQ=="number"?bP:bQ=="string"?j.hashString(bP):bQ=="object"?bP==null?0:bP instanceof a.Array?j.hashArray(bP):j.hashObject(bP):0;};j.hashString=function(bP){var bQ,bR,bS;if(bP===null)return 0;else{bQ=5381;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ=j.hashMix(bQ,bP[bR].charCodeAt());return bQ;}};j.hashArray=function(bP){var bQ,bR,bS;bQ=-34948909;for(bR=0,bS=q.length(bP)-1;bR<=bS;bR++)bQ=j.hashMix(bQ,j.Hash(q.get(bP,bR)));return bQ;};j.hashObject=function(bP){var bQ,bR;if("GetHashCode"in bP)return bP.GetHashCode();else{bQ=[0];for(var bS in bP)if(function(bT){bQ[0]=j.hashMix(j.hashMix(bQ[0],j.hashString(bT)),j.Hash(bP[bT]));return false;}(bS))break;return bQ[0];}};j.hashMix=function(bP,bQ){return(bP<<5)+bP+bQ;};j.Compare=function(bP,bQ){var bR,bS,bT,bU,bV,bW;if(bP===bQ)return 0;else{bS=typeof bP;switch(bS=="function"?1:bS=="boolean"?2:bS=="number"?2:bS=="string"?2:bS=="object"?3:0){case 0:return typeof bQ=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bP<bQ?-1:1;case 3:if(bP===null)bT=-1;else if(bQ===null)bT=1;else if("CompareTo"in bP)bT=bP.CompareTo(bQ);else if("CompareTo0"in bP)bT=bP.CompareTo0(bQ);else if(bP instanceof a.Array&&bQ instanceof a.Array)bT=j.compareArrays(bP,bQ);else if(bP instanceof a.Date&&bQ instanceof a.Date)bT=j.compareDates(bP,bQ);else{bU=[0];for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bQ.hasOwnProperty(bY)?(bU[0]=1,true):(bU[0]=j.Compare(bP[bY],bQ[bY]),bU[0]!==0);}(bX))break;if(bU[0]===0){for(var bY in bQ)if(function(bZ){return!bQ.hasOwnProperty(bZ)?false:!bP.hasOwnProperty(bZ)&&(bU[0]=-1,true);}(bY))break;}bT=bU[0];}return bT;}}};j.compareArrays=function(bP,bQ){var bR,bS;if(q.length(bP)<q.length(bQ))return -1;else if(q.length(bP)>q.length(bQ))return 1;else{bR=0;bS=0;while(bR===0&&bS<q.length(bP)){bR=j.Compare(q.get(bP,bS),q.get(bQ,bS));bS=bS+1;}return bR;}};j.compareDates=function(bP,bQ){return j.Compare(bP.getTime(),bQ.getTime());};l.GetFieldValues=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push(bP[bS]);return bQ;};p=o.TemplateInstance=bM.Class({get_Doc:function(){return this.doc;}},e,p);p.New=bM.Ctor(function(bP,bQ){e.New.call(this);this.doc=bQ;this.allVars=bP.$==0?bP.$0:i.FailWith("Should not happen");},p);q.get=function(bP,bQ){q.checkBounds(bP,bQ);return bP[bQ];};q.length=function(bP){return bP.dims===2?bP.length*bP.length:bP.length;};q.checkBounds=function(bP,bQ){if(bQ<0||bQ>=bP.length)i.FailWith("Index was outside the bounds of the array.");};q.set=function(bP,bQ,bR){q.checkBounds(bP,bQ);bP[bQ]=bR;};r=o.ProviderBuilder=bM.Class({},e,r);r.New$1=bM.Ctor(function(){var bP;e.New.call(this);this.i=null;this.k=(bP=y.NewGuid(),a.String(bP));this.h=[];bM.SetOptional(this,"s",null);},r);s.EventQ2=function(bP,bQ,bR,bS){return{$:5,$0:bQ,$1:function(bT){return function(bU){return bS({Vars:bR(),Target:bT,Event:bU});};}};};s.CompleteHoles=function(bP,bQ,bR){var bT,bU,bV,bW,bX;function bS(bY,bZ){var b0;return bU.Contains(bY)?null:(b0=bZ===0?K.GetOrAddHoleFor(bP,bY,function(){return{$:8,$0:bY,$1:g.Create$1("")};}):bZ===1?K.GetOrAddHoleFor(bP,bY,function(){return{$:13,$0:bY,$1:g.Create$1(0)};}):bZ===2?K.GetOrAddHoleFor(bP,bY,function(){return{$:9,$0:bY,$1:g.Create$1(false)};}):i.FailWith("Invalid value type"),(bT.set_Item(bY,b0),{$:1,$0:b0}));}bT=new G.New$5();bU=new I.New$3();bV=S.Get(bQ);try{while(bV.MoveNext()){bW=bV.Current();bX=bW.$0;bU.Add(bX);bT.set_Item(bX,bW);}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}return[J.append(bQ,q.choose(function(bY){return bS(bY[0],bY[1]);},bR)),{$:0,$0:bT}];};t.main=function(bP){C.LoadLocalTemplates("index");return bP?C.NamedTemplate("index",{$:1,$0:"main"},bP):void 0;};u=f.ConcreteVar=bM.Class({Set:function(bP){if(this.isConst)(function(bQ){return bQ("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bQ){bN.log(bQ);}));else{v.Obsolete(this.snap);this.current=bP;this.snap=v.New({$:2,$0:bP,$1:[]});}},Get:function(){return this.current;},get_View:function(){return this.view;},UpdateMaybe:function(bP){var bQ;bQ=bP(this.Get());bQ!=null&&bQ.$==1?this.Set(bQ.$0):void 0;}},h,u);u.New=bM.Ctor(function(bP,bQ,bR){var bS;bS=this;h.New.call(this);this.isConst=bP;this.current=bR;this.snap=bQ;this.view=function(){return bS.snap;};this.id=F.Int();},u);v.WhenRun=function(bP,bQ,bR){var bS;bS=bP.s;bS==null?bR():bS!=null&&bS.$==2?(bS.$1.push(bR),bQ(bS.$0)):bS!=null&&bS.$==3?(bS.$0.push(bQ),bS.$1.push(bR)):bQ(bS.$0);};v.Map=function(bP,bQ){var bR,bS;bR=bQ.s;return bR!=null&&bR.$==0?v.New({$:0,$0:bP(bR.$0)}):(bS=v.New({$:3,$0:[],$1:[]}),(v.When(bQ,function(bT){v.MarkDone(bS,bQ,bP(bT));},bS),bS));};v.Map3=function(bP,bQ,bR,bS){var bT,bU,bV,bW;function bX(bY){var bZ,b0,b1,b2;if(!(bZ=bW.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=v.ValueAndForever(bQ);b1=v.ValueAndForever(bR);b2=v.ValueAndForever(bS);b0!=null&&b0.$==1?b1!=null&&b1.$==1?b2!=null&&b2.$==1?b0.$0[1]&&b1.$0[1]&&b2.$0[1]?v.MarkForever(bW,bP(b0.$0[0],b1.$0[0],b2.$0[0])):v.MarkReady(bW,bP(b0.$0[0],b1.$0[0],b2.$0[0])):void 0:void 0:void 0;}}bT=bQ.s;bU=bR.s;bV=bS.s;return bT!=null&&bT.$==0?bU!=null&&bU.$==0?bV!=null&&bV.$==0?v.New({$:0,$0:bP(bT.$0,bU.$0,bV.$0)}):v.Map3Opt1(bP,bT.$0,bU.$0,bS):bV!=null&&bV.$==0?v.Map3Opt2(bP,bT.$0,bV.$0,bR):v.Map3Opt3(bP,bT.$0,bR,bS):bU!=null&&bU.$==0?bV!=null&&bV.$==0?v.Map3Opt4(bP,bU.$0,bV.$0,bQ):v.Map3Opt5(bP,bU.$0,bQ,bS):bV!=null&&bV.$==0?v.Map3Opt6(bP,bV.$0,bQ,bR):(bW=v.New({$:3,$0:[],$1:[]}),(v.When(bQ,bX,bW),v.When(bR,bX,bW),v.When(bS,bX,bW),bW));};v.Sequence=function(bP){var bQ,bR,bS;function bT(bU){var bV;if(bS[0]===0){bV=q.map(function(bW){var bX;bX=bW.s;return bX!=null&&bX.$==0?bX.$0:bX!=null&&bX.$==2?bX.$0:i.FailWith("value not found by View.Sequence");},bQ);q.forall(function(bW){var bX;bX=bW.s;return bX!=null&&bX.$==0;},bQ)?v.MarkForever(bR,bV):v.MarkReady(bR,bV);}else bS[0]--;}bQ=q.ofSeq(bP);return bQ.length==0?v.New({$:0,$0:[]}):(bR=v.New({$:3,$0:[],$1:[]}),(bS=[q.length(bQ)-1],(q.iter(function(bU){v.When(bU,bT,bR);},bQ),bR)));};v.Map2=function(bP,bQ,bR){var bS,bT,bU;function bV(bW){var bX,bY,bZ;if(!(bX=bU.s,bX!=null&&bX.$==0||bX!=null&&bX.$==2)){bY=v.ValueAndForever(bQ);bZ=v.ValueAndForever(bR);bY!=null&&bY.$==1?bZ!=null&&bZ.$==1?bY.$0[1]&&bZ.$0[1]?v.MarkForever(bU,bP(bY.$0[0],bZ.$0[0])):v.MarkReady(bU,bP(bY.$0[0],bZ.$0[0])):void 0:void 0;}}bS=bQ.s;bT=bR.s;return bS!=null&&bS.$==0?bT!=null&&bT.$==0?v.New({$:0,$0:bP(bS.$0,bT.$0)}):v.Map2Opt1(bP,bS.$0,bR):bT!=null&&bT.$==0?v.Map2Opt2(bP,bT.$0,bQ):(bU=v.New({$:3,$0:[],$1:[]}),(v.When(bQ,bV,bU),v.When(bR,bV,bU),bU));};v.Map2Unit=function(bP,bQ){var bR,bS,bT;function bU(){var bV,bW,bX;if(!(bV=bT.s,bV!=null&&bV.$==0||bV!=null&&bV.$==2)){bW=v.ValueAndForever(bP);bX=v.ValueAndForever(bQ);bW!=null&&bW.$==1?bX!=null&&bX.$==1?bW.$0[1]&&bX.$0[1]?v.MarkForever(bT,null):v.MarkReady(bT,null):void 0:void 0;}}bR=bP.s;bS=bQ.s;return bR!=null&&bR.$==0?bS!=null&&bS.$==0?v.New({$:0,$0:null}):bQ:bS!=null&&bS.$==0?bP:(bT=v.New({$:3,$0:[],$1:[]}),(v.When(bP,bU,bT),v.When(bQ,bU,bT),bT));};v.Copy=function(bP){var bQ,bR,bS;bQ=bP.s;return bQ==null?bP:bQ!=null&&bQ.$==2?(bR=v.New({$:2,$0:bQ.$0,$1:[]}),(v.WhenObsolete(bP,bR),bR)):bQ!=null&&bQ.$==3?(bS=v.New({$:3,$0:[],$1:[]}),(v.When(bP,function(bT){v.MarkDone(bS,bP,bT);},bS),bS)):bP;};v.WhenObsoleteRun=function(bP,bQ){var bR;bR=bP.s;bR==null?bQ():bR!=null&&bR.$==2?bR.$1.push(bQ):bR!=null&&bR.$==3?bR.$1.push(bQ):void 0;};v.When=function(bP,bQ,bR){var bS;bS=bP.s;bS==null?v.Obsolete(bR):bS!=null&&bS.$==2?(v.EnqueueSafe(bS.$1,bR),bQ(bS.$0)):bS!=null&&bS.$==3?(bS.$0.push(bQ),v.EnqueueSafe(bS.$1,bR)):bQ(bS.$0);};v.MarkDone=function(bP,bQ,bR){var bS;if(bS=bQ.s,bS!=null&&bS.$==0)v.MarkForever(bP,bR);else v.MarkReady(bP,bR);};v.Map3Opt1=function(bP,bQ,bR,bS){return v.Map(function(bT){return bP(bQ,bR,bT);},bS);};v.Map3Opt2=function(bP,bQ,bR,bS){return v.Map(function(bT){return bP(bQ,bT,bR);},bS);};v.Map3Opt3=function(bP,bQ,bR,bS){return v.Map2(function(bT,bU){return bP(bQ,bT,bU);},bR,bS);};v.Map3Opt4=function(bP,bQ,bR,bS){return v.Map(function(bT){return bP(bT,bQ,bR);},bS);};v.Map3Opt5=function(bP,bQ,bR,bS){return v.Map2(function(bT,bU){return bP(bT,bQ,bU);},bR,bS);};v.Map3Opt6=function(bP,bQ,bR,bS){return v.Map2(function(bT,bU){return bP(bT,bU,bQ);},bR,bS);};v.ValueAndForever=function(bP){var bQ;bQ=bP.s;return bQ!=null&&bQ.$==0?{$:1,$0:[bQ.$0,true]}:bQ!=null&&bQ.$==2?{$:1,$0:[bQ.$0,false]}:null;};v.MarkForever=function(bP,bQ){var bR,bS,bT,bU;bR=bP.s;if(bR!=null&&bR.$==3){bP.s={$:0,$0:bQ};bS=bR.$0;for(bT=0,bU=q.length(bS)-1;bT<=bU;bT++)(q.get(bS,bT))(bQ);}else void 0;};v.MarkReady=function(bP,bQ){var bR,bS,bT,bU;bR=bP.s;if(bR!=null&&bR.$==3){bP.s={$:2,$0:bQ,$1:bR.$1};bS=bR.$0;for(bT=0,bU=q.length(bS)-1;bT<=bU;bT++)(q.get(bS,bT))(bQ);}else void 0;};v.Map2Opt1=function(bP,bQ,bR){return v.Map(function(bS){return bP(bQ,bS);},bR);};v.Map2Opt2=function(bP,bQ,bR){return v.Map(function(bS){return bP(bS,bQ);},bR);};v.WhenObsolete=function(bP,bQ){var bR;bR=bP.s;bR==null?v.Obsolete(bQ):bR!=null&&bR.$==2?v.EnqueueSafe(bR.$1,bQ):bR!=null&&bR.$==3?v.EnqueueSafe(bR.$1,bQ):void 0;};v.EnqueueSafe=function(bP,bQ){var bR,bS,bT,bU;bP.push(bQ);if(bP.length%20===0){bR=bP.slice(0);bH.Clear(bP);for(bS=0,bT=q.length(bR)-1;bS<=bT;bS++){bU=q.get(bR,bS);typeof bU=="object"?function(bV){if(bV.s)bP.push(bV);}(bU):function(bV){bP.push(bV);}(bU);}}else void 0;};w.NewFromSeq=function(bP){var bQ,bR,bS;bQ={};bR=S.Get(bP);try{while(bR.MoveNext()){bS=bR.Current();bQ[bS[0]]=bS[1];}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ;};y.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bP){var bQ,bR;bQ=bK.random()*16|0;bR=bP=="x"?bQ:bQ&3|8;return bR.toString(16);});};A=z.List=bM.Class({GetEnumerator:function(){return S.Get(this);},GetEnumerator0:function(){return S.Get0(this);}},null,A);C.LoadLocalTemplates=function(bP){!C.LocalTemplatesLoaded()?(C.set_LocalTemplatesLoaded(true),C.LoadNestedTemplates(self.document.body,"")):void 0;C.LoadedTemplates().set_Item(bP,C.LoadedTemplateFile(""));};C.NamedTemplate=function(bP,bQ,bR){var bS,bT;bS=(bT=null,[C.LoadedTemplateFile(bP).TryGetValue(bQ==null?"":bQ.$0,{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]);return bS[0]?C.ChildrenTemplate(bS[1].cloneNode(true),bR):(bN.warn("Local template doesn't exist",bQ),D.get_Empty());};C.LocalTemplatesLoaded=function(){U.$cctor();return U.LocalTemplatesLoaded;};C.set_LocalTemplatesLoaded=function(bP){U.$cctor();U.LocalTemplatesLoaded=bP;};C.LoadNestedTemplates=function(bP,bQ){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4;function bR(b5){var b6,b7;if(!bS.ContainsKey(b5)){b6=(b7=null,[bT.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?(b4.Add(b5),bT.Remove(b5),C.PrepareTemplateStrict(bQ,{$:1,$0:b5},b6[1],{$:1,$0:bR})):bN.warn(b4.Contains(b5)?"Encountered loop when instantiating "+b5:"Local template does not exist: "+b5);}}bS=C.LoadedTemplateFile(bQ);bT=new G.New$5();bU=bP.querySelectorAll("[ws-template]");for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=bU[bV];bY=bX.getAttribute("ws-template").toLowerCase();bX.removeAttribute("ws-template");bT.set_Item(bY,C.FakeRootSingle(bX));}bZ=bP.querySelectorAll("[ws-children-template]");for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];b3=b2.getAttribute("ws-children-template").toLowerCase();b2.removeAttribute("ws-children-template");bT.set_Item(b3,C.FakeRoot(b2));}b4=new I.New$3();while(bT.count>0)bR(J.head(bT.get_Keys()));};C.LoadedTemplates=function(){U.$cctor();return U.LoadedTemplates;};C.LoadedTemplateFile=function(bP){var bQ,bR,bS;bQ=(bR=null,[C.LoadedTemplates().TryGetValue(bP,{get:function(){return bR;},set:function(bT){bR=bT;}}),bR]);return bQ[0]?bQ[1]:(bS=new G.New$5(),(C.LoadedTemplates().set_Item(bP,bS),bS));};C.ChildrenTemplate=function(bP,bQ){var bR,bS,bT,bU,bV;bR=C.InlineTemplate(bP,J.append(bQ,C.GlobalHoles().get_Values()));bS=bR[1];bT=bR[0];bU=bT.Els;return!j.Equals(bU,null)&&bU.length===1&&(q.get(bU,0)instanceof M&&(j.Equals(q.get(bU,0).nodeType,M.ELEMENT_NODE)&&(bV=q.get(bU,0),true)))?_0.TreeNode(bT,bS):D.Mk({$:6,$0:bT},bS);};C.FakeRootSingle=function(bP){var bQ,bR,bS,bT;bP.removeAttribute("ws-template");bQ=bP.getAttribute("ws-replace");bQ===null?void 0:(bP.removeAttribute("ws-replace"),bR=bP.parentNode,j.Equals(bR,null)?void 0:(bS=self.document.createElement(bP.tagName),bS.setAttribute("ws-replace",bQ),bR.replaceChild(bS,bP)));bT=self.document.createElement("div");bT.appendChild(bP);return bT;};C.FakeRoot=function(bP){var bQ;bQ=self.document.createElement("div");while(bP.hasChildNodes())bQ.appendChild(bP.firstChild);return bQ;};C.PrepareTemplateStrict=function(bP,bQ,bR,bS){var bT;function bU(bZ,b0){var b1,b2,b3,b4,b5,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function b6(cq){}while(true)switch(bZ){case 0:if(b0!==null){b1=b0.nextSibling;if(j.Equals(b0.nodeType,M.TEXT_NODE))_1.convertTextNode(b0);else if(j.Equals(b0.nodeType,M.ELEMENT_NODE))bW(b0);b0=b1;}else return null;break;case 1:b7=_2.string(b0.nodeName,{$:1,$0:3},null).toLowerCase();b8=(b2=b7.indexOf("."),b2===-1?[bP,b7]:[_2.string(b7,null,{$:1,$0:b2-1}),_2.string(b7,{$:1,$0:b2+1},null)]);b9=b8[1];b_=b8[0];if(b_!==""&&!C.LoadedTemplates().ContainsKey(b_))return _1.failNotLoaded(b9);else{if(b_===""&&bS!=null)bS.$0(b9);b$=C.LoadedTemplates().get_Item(b_);if(!b$.ContainsKey(b9))return _1.failNotLoaded(b9);else{ca=b$.get_Item(b9);cb=ca.cloneNode(true);cc=new I.New$3();cd=new G.New$5();ce=b0.attributes;for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce.item(cf).name.toLowerCase();cd.set_Item(ch,(ci=ce.item(cf).nodeValue,ci===""?ch:ci.toLowerCase()));!cc.Add(ch)?bN.warn("Hole mapped twice",ch):void 0;}for(cj=0,ck=b0.childNodes.length-1;cj<=ck;cj++){cl=b0.childNodes[cj];j.Equals(cl.nodeType,M.ELEMENT_NODE)?!cc.Add(cl.nodeName.toLowerCase())?bN.warn("Hole filled twice",b9):void 0:void 0;}cm=b0.childNodes.length===1&&j.Equals(b0.firstChild.nodeType,M.TEXT_NODE);if(cm){b4=_1.fillTextHole(cb,b0.firstChild.textContent,b9);((function(cq){return function(cr){if(cr!=null)cq(cr.$0);};}((b5=function(cq){return function(cr){return cq.Add(cr);};}(cc),function(cq){return b6(b5(cq));})))(b4));}_1.removeHolesExcept(cb,cc);if(!cm){for(cn=0,co=b0.childNodes.length-1;cn<=co;cn++){cp=b0.childNodes[cn];j.Equals(cp.nodeType,M.ELEMENT_NODE)?cp.hasAttributes()?_1.fillInstanceAttrs(cb,cp):bV(cb,cp):void 0;}}_1.mapHoles(cb,cd);_1.fill(cb,b0.parentNode,b0);b0.parentNode.removeChild(b0);return;}}break;}}function bV(bZ,b0){var b1,b3,b4;function b2(b5,b6){var b7;if(b3==="title"&&b0.hasChildNodes()){b7=_3.ParseHTMLIntoFakeRoot(b0.textContent);b0.removeChild(b0.firstChild);while(b7.hasChildNodes())b0.appendChild(b7.firstChild);}else null;bW(b0);return _1.fill(b0,b5,b6);}b3=b0.nodeName.toLowerCase();C.foreachNotPreserved(bZ,"[ws-attr-holes]",function(b5){var b6,b7,b8,b9,b_;b6=bc.SplitChars(b5.getAttribute("ws-attr-holes"),[" "],1);for(b7=0,b8=b6.length-1;b7<=b8;b7++){b9=q.get(b6,b7);b5.setAttribute(b9,(b_=new a.RegExp("\\${"+b3+"}","ig"),b5.getAttribute(b9).replace(b_,b0.textContent)));}});b4=bZ.querySelector("[ws-hole="+b3+"]");if(j.Equals(b4,null)){b1=bZ.querySelector("[ws-replace="+b3+"]");return j.Equals(b1,null)?null:(b2(b1.parentNode,b1),void b1.parentNode.removeChild(b1));}else{while(b4.hasChildNodes())b4.removeChild(b4.lastChild);b4.removeAttribute("ws-hole");return b2(b4,null);}}function bW(bZ){if(!bZ.hasAttribute("ws-preserve"))if(bc.StartsWith(bZ.nodeName.toLowerCase(),"ws-"))bY(bZ);else{_1.convertAttrs(bZ);bX(bZ.firstChild);}}function bX(bZ){return bU(0,bZ);}function bY(bZ){return bU(1,bZ);}bT=(bQ==null?"":bQ.$0).toLowerCase();C.LoadedTemplateFile(bP).set_Item(bT,bR);bR.hasChildNodes()?(function(bZ){var b0,b1,b2,b3;while(true){b0=bZ.querySelector("[ws-template]");if(j.Equals(b0,null)){b1=bZ.querySelector("[ws-children-template]");if(j.Equals(b1,null))return null;else{b2=b1.getAttribute("ws-children-template");b1.removeAttribute("ws-children-template");C.PrepareTemplateStrict(bP,{$:1,$0:b2},b1,null);bZ=bZ;}}else{b3=b0.getAttribute("ws-template");(C.PrepareSingleTemplate(bP,{$:1,$0:b3},b0))(null);bZ=bZ;}}}(bR),bX(bR.firstChild)):void 0;};C.InlineTemplate=function(bP,bQ){var bR,bS,bT,bU,bX,bY,bZ,b0,b1,b2,b3;function bV(b4,b5){var b6,b7,b8;b6=_.Insert(b4,b5);bY.push(_.Updates(b6));bZ.push([b4,b6]);b7=bM.GetOptional(b6.OnAfterRender);return b7==null?null:(b8=b7.$0,void b0.push(function(){b8(b4);}));}function bW(b4){var b5,b6;b5=(b6=null,[b1.TryGetValue(b4,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);return b5[0]?b5[1].$==0?{$:1,$0:b5[1].$1}:b5[1].$==1?{$:1,$0:D.TextNode(b5[1].$1)}:b5[1].$==2?{$:1,$0:D.TextView(b5[1].$1)}:b5[1].$==8?{$:1,$0:D.TextView(b5[1].$1.get_View())}:b5[1].$==9?{$:1,$0:D.TextView(N.Map(a.String,b5[1].$1.get_View()))}:b5[1].$==10?{$:1,$0:D.TextView(N.Map(function(b7){return b7.get_Input();},b5[1].$1.get_View()))}:b5[1].$==11?{$:1,$0:D.TextView(N.Map(a.String,b5[1].$1.get_View()))}:b5[1].$==12?{$:1,$0:D.TextView(N.Map(function(b7){return b7.get_Input();},b5[1].$1.get_View()))}:b5[1].$==13?{$:1,$0:D.TextView(N.Map(a.String,b5[1].$1.get_View()))}:(bN.warn("Content hole filled with attribute data",b4),null):null;}bX=[];bY=[];bZ=[];b0=[];b1=new G.New$5();b2=S.Get(bQ);try{while(b2.MoveNext()){b3=b2.Current();b1.set_Item(b3.$0,b3);}}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}bR=_3.ChildrenArray(bP);C.foreachNotPreserved(bP,"[ws-hole]",function(b4){var b5,b6,b7;b7=b4.getAttribute("ws-hole");b4.removeAttribute("ws-hole");while(b4.hasChildNodes())b4.removeChild(b4.lastChild);b5=bW(b7);b5!=null&&b5.$==1?(b6=b5.$0,W.LinkElement(b4,b6.docNode),bX.push(Y.New(_.Empty(b4),b6.docNode,null,b4,F.Int(),null)),bY.push(b6.updates)):void 0;});C.foreachNotPreserved(bP,"[ws-replace]",function(b4){var b5,b6,b7,b8,b9,b_;b5=bW(b4.getAttribute("ws-replace"));b5!=null&&b5.$==1?(b6=b5.$0,b7=b4.parentNode,b8=self.document.createTextNode(""),b7.replaceChild(b8,b4),b9=W.InsertBeforeDelim(b8,b6.docNode),b_=q.tryFindIndex(function(b$){return b4===b$;},bR),b_==null?void 0:q.set(bR,b_.$0,b6.docNode),bX.push(Y.New(_.Empty(b7),b6.docNode,{$:1,$0:[b9,b8]},b7,F.Int(),null)),bY.push(b6.updates)):void 0;});C.foreachNotPreserved(bP,"[ws-attr]",function(b4){var b5,b6,b7;b5=b4.getAttribute("ws-attr");b4.removeAttribute("ws-attr");b6=(b7=null,[b1.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?b6[1].$==3?bV(b4,b6[1].$1):bN.warn("Attribute hole filled with non-attribute data",b5):void 0;});C.foreachNotPreserved(bP,"[ws-on]",function(b4){bV(b4,P.Concat(q.choose(function(b5){var b6,b7,b8;b6=bc.SplitChars(b5,[":"],1);b7=(b8=null,[b1.TryGetValue(q.get(b6,1),{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);return b7[0]?b7[1].$==4?{$:1,$0:$.Handler(q.get(b6,0),b7[1].$1)}:b7[1].$==5?{$:1,$0:P.Handler(q.get(b6,0),b7[1].$1)}:(bN.warn("Event hole on"+q.get(b6,0)+" filled with non-event data",q.get(b6,1)),null):null;},bc.SplitChars(b4.getAttribute("ws-on"),[" "],1))));b4.removeAttribute("ws-on");});C.foreachNotPreserved(bP,"[ws-onafterrender]",function(b4){var b5,b6,b7;b5=b4.getAttribute("ws-onafterrender");b6=(b7=null,[b1.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?b6[1].$==6?(b4.removeAttribute("ws-onafterrender"),bV(b4,$.OnAfterRender(b6[1].$1))):b6[1].$==7?(b4.removeAttribute("ws-onafterrender"),bV(b4,$.OnAfterRender(b6[1].$1))):bN.warn("onafterrender hole filled with non-onafterrender data",b5):void 0;});C.foreachNotPreserved(bP,"[ws-var]",function(b4){var b5,b6,b7;b5=b4.getAttribute("ws-var");b4.removeAttribute("ws-var");b6=(b7=null,[b1.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?b6[1].$==8?bV(b4,$.Value(b6[1].$1)):b6[1].$==9?bV(b4,$.Checked(b6[1].$1)):b6[1].$==10?bV(b4,$.IntValue(b6[1].$1)):b6[1].$==11?bV(b4,$.IntValueUnchecked(b6[1].$1)):b6[1].$==12?bV(b4,$.FloatValue(b6[1].$1)):b6[1].$==13?bV(b4,$.FloatValueUnchecked(b6[1].$1)):bN.warn("Var hole filled with non-Var data",b5):void 0;});C.foreachNotPreserved(bP,"[ws-attr-holes]",function(b4){var b5,b6,b7,b8;b5=new a.RegExp(C.TextHoleRE(),"g");b6=bc.SplitChars(b4.getAttribute("ws-attr-holes"),[" "],1);b4.removeAttribute("ws-attr-holes");for(b7=0,b8=b6.length-1;b7<=b8;b7++)(function(){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj;cg=q.get(b6,b7);ch=b4.getAttribute(cg);b9=null;b_=0;ci=[];while(b9=b5.exec(ch),b9!==null){cj=_2.string(ch,{$:1,$0:b_},{$:1,$0:b5.lastIndex-q.get(b9,0).length-1});b_=b5.lastIndex;ci.push([cj,q.get(b9,1)]);}ca=_2.string(ch,{$:1,$0:b_},null);b5.lastIndex=0;cb=q.foldBack(function(ck,cl){return(function(cm){var cn,co;cn=cm[0];co=cm[1];return function(cp){var cq,cr,cs,ct,cu;cq=cp[0];cr=cp[1];cs=(ct=(cu=null,[b1.TryGetValue(co,{get:function(){return cu;},set:function(cv){cu=cv;}}),cu]),ct[0]?ct[1].$==1?{$:0,$0:ct[1].$1}:ct[1].$==2?{$:1,$0:ct[1].$1}:ct[1].$==8?{$:1,$0:ct[1].$1.get_View()}:ct[1].$==9?{$:1,$0:N.Map(a.String,ct[1].$1.get_View())}:ct[1].$==10?{$:1,$0:N.Map(function(cv){return cv.get_Input();},ct[1].$1.get_View())}:ct[1].$==11?{$:1,$0:N.Map(a.String,ct[1].$1.get_View())}:ct[1].$==12?{$:1,$0:N.Map(function(cv){return cv.get_Input();},ct[1].$1.get_View())}:ct[1].$==13?{$:1,$0:N.Map(a.String,ct[1].$1.get_View())}:(bN.warn("Attribute value hole filled with non-text data",co),{$:0,$0:""}):{$:0,$0:""});return cs.$==1?[cn,new bb({$:1,$0:cq===""?cs.$0:N.Map(function(cv){return cv+cq;},cs.$0),$1:cr})]:[cn+cs.$0+cq,cr];};}(ck))(cl);},ci,[ca,bb.Empty]);return bV(b4,cb[1].$==1?cb[1].$1.$==1?cb[1].$1.$1.$==1?cb[1].$1.$1.$1.$==0?(cc=cb[0],$.Dynamic(cg,N.Map3(function(ck,cl,cm){return cc+ck+cl+cm;},cb[1].$0,cb[1].$1.$0,cb[1].$1.$1.$0))):(cd=cb[0],$.Dynamic(cg,N.Map(function(ck){return cd+bc.concat("",ck);},N.Sequence(cb[1])))):(ce=cb[0],$.Dynamic(cg,N.Map2(function(ck,cl){return ce+ck+cl;},cb[1].$0,cb[1].$1.$0))):cb[0]===""?$.Dynamic(cg,cb[1].$0):(cf=cb[0],$.Dynamic(cg,N.Map(function(ck){return cf+ck;},cb[1].$0))):P.Create(cg,cb[0]));}());});return[bM.DeleteEmptyFields({Els:bR,Dirty:true,Holes:bX,Attrs:bZ,Render:(bS=b0.length==0?null:{$:1,$0:function(b4){q.iter(function(b5){b5(b4);},b0);}},bS?bS.$0:void 0),El:(bT=!j.Equals(bR,null)&&bR.length===1&&(q.get(bR,0)instanceof M&&(q.get(bR,0)instanceof a.Element&&(bU=q.get(bR,0),true)))?{$:1,$0:bU}:null,bT?bT.$0:void 0)},["Render","El"]),bd.TreeReduce(N.Const(),N.Map2Unit,bY)];};C.GlobalHoles=function(){U.$cctor();return U.GlobalHoles;};C.foreachNotPreserved=function(bP,bQ,bR){_3.IterSelector(bP,bQ,function(bS){if(bS.closest("[ws-preserve]")==null)bR(bS);});};C.PrepareSingleTemplate=function(bP,bQ,bR){var bS;bS=C.FakeRootSingle(bR);return function(bT){C.PrepareTemplateStrict(bP,bQ,bS,bT);};};C.TextHoleRE=function(){U.$cctor();return U.TextHoleRE;};D=f.Doc=bM.Class({},e,D);D.RunById=function(bP,bQ){var bR;bR=self.document.getElementById(bP);j.Equals(bR,null)?i.FailWith("invalid id: "+bP):D.Run(bR,bQ);};D.Run=function(bP,bQ){W.LinkElement(bP,bQ.docNode);D.RunInPlace(false,bP,bQ);};D.get_Empty=function(){return D.Mk(null,N.Const());};D.RunInPlace=function(bP,bQ,bR){var bS;bS=W.CreateRunState(bQ,bR.docNode);N.Sink(_5.get_UseAnimations()||_6.BatchUpdatesEnabled()?_7.StartProcessor(W.PerformAnimatedUpdate(bP,bS,bR.docNode)):function(){W.PerformSyncUpdate(bP,bS,bR.docNode);},bR.updates);};D.Mk=function(bP,bQ){return new D.New(bP,bQ);};D.TextNode=function(bP){return D.Mk({$:5,$0:self.document.createTextNode(bP)},N.Const());};D.TextView=function(bP){var bQ;bQ=W.CreateTextNode();return D.Mk({$:4,$0:bQ},N.Map(function(bR){W.UpdateTextNode(bQ,bR);},bP));};D.New=bM.Ctor(function(bP,bQ){e.New.call(this);this.docNode=bP;this.updates=bQ;},D);F.Int=function(){F.set_counter(F.counter()+1);return F.counter();};F.set_counter=function(bP){X.$cctor();X.counter=bP;};F.counter=function(){X.$cctor();return X.counter;};G=z.Dictionary=bM.Class({set_Item:function(bP,bQ){this.set(bP,bQ);},set:function(bP,bQ){var bR,bS,bT,bU;bR=this;bS=this.hash(bP);bT=this.data[bS];bT==null?(this.count=this.count+1,this.data[bS]=new a.Array({K:bP,V:bQ})):(bU=q.tryFindIndex(function(bV){return bR.equals.apply(null,[(i.KeyValue(bV))[0],bP]);},bT),bU==null?(this.count=this.count+1,bT.push({K:bP,V:bQ})):bT[bU.$0]={K:bP,V:bQ});},TryGetValue:function(bP,bQ){var bR,bS,bT;bR=this;bS=this.data[this.hash(bP)];return bS==null?false:(bT=q.tryPick(function(bU){var bV;bV=i.KeyValue(bU);return bR.equals.apply(null,[bV[0],bP])?{$:1,$0:bV[1]}:null;},bS),bT!=null&&bT.$==1&&(bQ.set(bT.$0),true));},ContainsKey:function(bP){var bQ,bR;bQ=this;bR=this.data[this.hash(bP)];return bR==null?false:q.exists(function(bS){return bQ.equals.apply(null,[(i.KeyValue(bS))[0],bP]);},bR);},Remove:function(bP){return this.remove(bP);},get_Keys:function(){return new _4.New(this);},get_Values:function(){return new bf.New(this);},remove:function(bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bP);bS=this.data[bR];return bS==null?false:(bT=q.filter(function(bU){return!bQ.equals.apply(null,[(i.KeyValue(bU))[0],bP]);},bS),q.length(bT)<bS.length&&(this.count=this.count-1,this.data[bR]=bT,true));},get_Item:function(bP){return this.get(bP);},get:function(bP){var bQ,bR;bQ=this;bR=this.data[this.hash(bP)];return bR==null?R.notPresent():q.pick(function(bS){var bT;bT=i.KeyValue(bS);return bQ.equals.apply(null,[bT[0],bP])?{$:1,$0:bT[1]}:null;},bR);},GetEnumerator:function(){return S.Get0(this);},GetEnumerator0:function(){return S.Get0(q.concat(l.GetFieldValues(this.data)));}},e,G);G.New$5=bM.Ctor(function(){G.New$6.call(this,[],j.Equals,j.Hash);},G);G.New$6=bM.Ctor(function(bP,bQ,bR){var bS,bT;e.New.call(this);this.equals=bQ;this.hash=bR;this.count=0;this.data=[];bS=S.Get(bP);try{while(bS.MoveNext()){bT=bS.Current();this.set(bT.K,bT.V);}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},G);I=z.HashSet=bM.Class({Add:function(bP){return this.add(bP);},Contains:function(bP){var bQ;bQ=this.data[this.hash(bP)];return bQ==null?false:this.arrContains(bP,bQ);},add:function(bP){var bQ,bR;bQ=this.hash(bP);bR=this.data[bQ];return bR==null?(this.data[bQ]=[bP],this.count=this.count+1,true):this.arrContains(bP,bR)?false:(bR.push(bP),this.count=this.count+1,true);},arrContains:function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=bQ.length;while(bR&&bS<bU)if(this.equals.apply(null,[bQ[bS],bP]))bR=false;else bS=bS+1;return!bR;},ExceptWith:function(bP){var bQ;bQ=S.Get(bP);try{while(bQ.MoveNext())this.Remove(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bP){var bQ,bR,bS,bT;bQ=0;bR=bm.concat(this.data);for(bS=0,bT=bR.length-1;bS<=bT;bS++)q.set(bP,bS,bR[bS]);},IntersectWith:function(bP){var bQ,bR,bS,bT,bU;bQ=new I.New$4(bP,this.equals,this.hash);bR=bm.concat(this.data);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=bR[bS];!bQ.Contains(bU)?this.Remove(bU):void 0;}},Remove:function(bP){var bQ;bQ=this.data[this.hash(bP)];return bQ==null?false:this.arrRemove(bP,bQ)&&(this.count=this.count-1,true);},arrRemove:function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=bQ.length;while(bR&&bS<bU)if(this.equals.apply(null,[bQ[bS],bP])){bQ.splice.apply(bQ,[bS,1]);bR=false;}else bS=bS+1;return!bR;},GetEnumerator:function(){return S.Get(bm.concat(this.data));},GetEnumerator0:function(){return S.Get(bm.concat(this.data));}},e,I);I.New$3=bM.Ctor(function(){I.New$4.call(this,[],j.Equals,j.Hash);},I);I.New$4=bM.Ctor(function(bP,bQ,bR){var bS;e.New.call(this);this.equals=bQ;this.hash=bR;this.data=[];this.count=0;bS=S.Get(bP);try{while(bS.MoveNext())this.add(bS.Current());}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},I);I.New$2=bM.Ctor(function(bP){I.New$4.call(this,bP,j.Equals,j.Hash);},I);J.append=function(bP,bQ){return{GetEnumerator:function(){var bR,bS;bR=S.Get(bP);bS=[true];return new T.New(bR,null,function(bT){var bU;return bT.s.MoveNext()?(bT.c=bT.s.Current(),true):(bU=bT.s,!j.Equals(bU,null)?bU.Dispose():void 0,bT.s=null,bS[0]&&(bS[0]=false,bT.s=S.Get(bQ),bT.s.MoveNext()?(bT.c=bT.s.Current(),true):(bT.s.Dispose(),bT.s=null,false)));},function(bT){var bU;bU=bT.s;!j.Equals(bU,null)?bU.Dispose():void 0;});}};};J.head=function(bP){var bQ;bQ=S.Get(bP);try{return bQ.MoveNext()?bQ.Current():J.insufficient();}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};J.fold=function(bP,bQ,bR){var bS,bT;bS=bQ;bT=S.Get(bR);try{while(bT.MoveNext())bS=bP(bS,bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};J.iter=function(bP,bQ){var bR;bR=S.Get(bQ);try{while(bR.MoveNext())bP(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};J.map=function(bP,bQ){return{GetEnumerator:function(){var bR;bR=S.Get(bQ);return new T.New(null,null,function(bS){return bR.MoveNext()&&(bS.c=bP(bR.Current()),true);},function(){bR.Dispose();});}};};J.max=function(bP){var bQ,bR,bS;bQ=S.Get(bP);try{if(!bQ.MoveNext())J.seqEmpty();bR=bQ.Current();while(bQ.MoveNext()){bS=bQ.Current();j.Compare(bS,bR)===1?bR=bS:void 0;}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};J.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};J.forall=function(bP,bQ){return!J.exists(function(bR){return!bP(bR);},bQ);};J.exists=function(bP,bQ){var bR,bS;bR=S.Get(bQ);try{bS=false;while(!bS&&bR.MoveNext())bS=bP(bR.Current());return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};q.choose=function(bP,bQ){var bR,bS,bT,bU;bR=[];for(bS=0,bT=bQ.length-1;bS<=bT;bS++){bU=bP(bQ[bS]);bU==null?void 0:bR.push(bU.$0);}return bR;};q.tryFindIndex=function(bP,bQ){var bR,bS;bR=null;bS=0;while(bS<bQ.length&&bR==null){bP(bQ[bS])?bR={$:1,$0:bS}:void 0;bS=bS+1;}return bR;};q.tryPick=function(bP,bQ){var bR,bS,bT;bR=null;bS=0;while(bS<bQ.length&&bR==null){bT=bP(bQ[bS]);bT!=null&&bT.$==1?bR=bT:void 0;bS=bS+1;}return bR;};q.exists=function(bP,bQ){var bR,bS,bT,bU;bR=false;bS=0;bU=q.length(bQ);while(!bR&&bS<bU)if(bP(bQ[bS]))bR=true;else bS=bS+1;return bR;};q.concat=function(bP){return a.Array.prototype.concat.apply([],q.ofSeq(bP));};q.foldBack=function(bP,bQ,bR){var bS,bT,bU,bV,bW;bS=bR;bU=bQ.length;for(bV=1,bW=bU;bV<=bW;bV++)bS=bP(bQ[bU-bV],bS);return bS;};q.iter=function(bP,bQ){var bR,bS;for(bR=0,bS=bQ.length-1;bR<=bS;bR++)bP(bQ[bR]);};q.map=function(bP,bQ){var bR,bS,bT;bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bP(bQ[bS]);return bR;};q.filter=function(bP,bQ){var bR,bS,bT;bR=[];for(bS=0,bT=bQ.length-1;bS<=bT;bS++)if(bP(bQ[bS]))bR.push(bQ[bS]);return bR;};q.ofSeq=function(bP){var bQ,bR;if(bP instanceof a.Array)return bP.slice();else if(bP instanceof bb)return q.ofList(bP);else{bQ=[];bR=S.Get(bP);try{while(bR.MoveNext())bQ.push(bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};q.pick=function(bP,bQ){var bR;bR=q.tryPick(bP,bQ);return bR==null?i.FailWith("KeyNotFoundException"):bR.$0;};q.ofList=function(bP){var bQ,bR;bR=[];bQ=bP;while(!(bQ.$==0)){bR.push(ba.head(bQ));bQ=ba.tail(bQ);}return bR;};q.forall=function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=q.length(bQ);while(bR&&bS<bU)if(bP(bQ[bS]))bS=bS+1;else bR=false;return bR;};q.create=function(bP,bQ){var bR,bS,bT;bR=new a.Array(bP);for(bS=0,bT=bP-1;bS<=bT;bS++)bR[bS]=bQ;return bR;};q.init=function(bP,bQ){var bR,bS,bT;bP<0?i.FailWith("Negative size given."):null;bR=new a.Array(bP);for(bS=0,bT=bP-1;bS<=bT;bS++)bR[bS]=bQ(bS);return bR;};K.$cctor=function(){K.$cctor=a.ignore;K.initialized=new G.New$5();};K=o.TemplateInitializer=bM.Class({},e,K);K.GetOrAddHoleFor=function(bP,bQ,bR){var bS,bT,bU,bV;K.$cctor();bS=K.GetHolesFor(bP);bT=(bU=null,[bS.TryGetValue(bQ,{get:function(){return bU;},set:function(bW){bU=bW;}}),bU]);return bT[0]?bT[1]:(bV=bR(),(bS.set_Item(bQ,bV),bV));};K.GetHolesFor=function(bP){var bQ,bR,bS;K.$cctor();bQ=(bR=null,[K.initialized.TryGetValue(bP,{get:function(){return bR;},set:function(bT){bR=bT;}}),bR]);return bQ[0]?bQ[1]:(bS=new G.New$5(),(K.initialized.set_Item(bP,bS),bS));};v.Obsolete=function(bP){var bQ,bR,bS,bT,bU;bR=bP.s;if(bR==null||(bR!=null&&bR.$==2?(bQ=bR.$1,false):bR!=null&&bR.$==3?(bQ=bR.$1,false):true))void 0;else{bP.s=null;for(bS=0,bT=q.length(bQ)-1;bS<=bT;bS++){bU=q.get(bQ,bS);typeof bU=="object"?function(bV){v.Obsolete(bV);}(bU):bU();}}};v.New=function(bP){return{s:bP};};N=f.View=bM.Class({},null,N);O.TryParseInt32=function(bP,bQ){return O.TryParse(bP,-2147483648,2147483647,bQ);};P=f.AttrProxy=bM.Class({},null,P);P.Handler=function(bP,bQ){return P.HandlerImpl(bP,bQ);};P.Concat=function(bP){var bQ;bQ=bd.ofSeqNonCopying(bP);return bd.TreeReduce(_.EmptyAttr(),P.Append,bQ);};P.Create=function(bP,bQ){return _.Static(function(bR){bR.setAttribute(bP,bQ);});};P.HandlerImpl=function(bP,bQ){return _.Static(function(bR){bR.addEventListener(bP,function(bS){return(bQ(bR))(bS);},false);});};P.Append=function(bP,bQ){return _.AppendTree(bP,bQ);};Q=f.CheckedInput=bM.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,Q);R.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};S.Get=function(bP){return bP instanceof a.Array?S.ArrayEnumerator(bP):j.Equals(typeof bP,"string")?S.StringEnumerator(bP):bP.GetEnumerator();};S.ArrayEnumerator=function(bP){return new T.New(0,null,function(bQ){var bR;bR=bQ.s;return bR<q.length(bP)&&(bQ.c=q.get(bP,bR),bQ.s=bR+1,true);},void 0);};S.StringEnumerator=function(bP){return new T.New(0,null,function(bQ){var bR;bR=bQ.s;return bR<bP.length&&(bQ.c=bP[bR],bQ.s=bR+1,true);},void 0);};S.Get0=function(bP){return bP instanceof a.Array?S.ArrayEnumerator(bP):j.Equals(typeof bP,"string")?S.StringEnumerator(bP):"GetEnumerator0"in bP?bP.GetEnumerator0():bP.GetEnumerator();};T=S.T=bM.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},e,T);T.New=bM.Ctor(function(bP,bQ,bR,bS){e.New.call(this);this.s=bP;this.c=bQ;this.n=bR;this.d=bS;},T);U.$cctor=function(){U.$cctor=a.ignore;U.LoadedTemplates=new G.New$5();U.LocalTemplatesLoaded=false;U.GlobalHoles=new G.New$5();U.TextHoleRE="\\${([^}]+)}";U.RenderedFullDocTemplate=null;};W.LinkElement=function(bP,bQ){W.InsertDoc(bP,bQ,null);};W.InsertDoc=function(bP,bQ,bR){var bS;return bQ!=null&&bQ.$==1?W.InsertNode(bP,bQ.$0.El,bR):bQ!=null&&bQ.$==2?(bS=bQ.$0,(bS.Dirty=false,W.InsertDoc(bP,bS.Current,bR))):bQ==null?bR:bQ!=null&&bQ.$==4?W.InsertNode(bP,bQ.$0.Text,bR):bQ!=null&&bQ.$==5?W.InsertNode(bP,bQ.$0,bR):bQ!=null&&bQ.$==6?q.foldBack(function(bT,bU){return bT==null||bT.constructor===H?W.InsertDoc(bP,bT,bU):W.InsertNode(bP,bT,bU);},bQ.$0.Els,bR):W.InsertDoc(bP,bQ.$0,W.InsertDoc(bP,bQ.$1,bR));};W.CreateRunState=function(bP,bQ){return bh.New(bi.get_Empty(),W.CreateElemNode(bP,_.EmptyAttr(),bQ));};W.PerformAnimatedUpdate=function(bP,bQ,bR){var bS;return _5.get_UseAnimations()?(bS=null,bj.Delay(function(){var bT,bU,bV;bT=bi.FindAll(bR);bU=W.ComputeChangeAnim(bQ,bT);bV=W.ComputeEnterAnim(bQ,bT);return bj.Bind(_5.Play(_5.Append(bU,W.ComputeExitAnim(bQ,bT))),function(){return bj.Bind(W.SyncElemNodesNextFrame(bP,bQ),function(){return bj.Bind(_5.Play(bV),function(){bQ.PreviousNodes=bT;return bj.Return(null);});});});})):W.SyncElemNodesNextFrame(bP,bQ);};W.PerformSyncUpdate=function(bP,bQ,bR){var bS;bS=bi.FindAll(bR);W.SyncElemNode(bP,bQ.Top);bQ.PreviousNodes=bS;};W.InsertBeforeDelim=function(bP,bQ){var bR,bS;bR=bP.parentNode;bS=self.document.createTextNode("");bR.insertBefore(bS,bP);W.LinkPrevElement(bP,bQ);return bS;};W.InsertNode=function(bP,bQ,bR){_3.InsertAt(bP,bR,bQ);return bQ;};W.CreateElemNode=function(bP,bQ,bR){var bS;W.LinkElement(bP,bR);bS=_.Insert(bP,bQ);return Y.New(bS,bR,null,bP,F.Int(),bM.GetOptional(bS.OnAfterRender));};W.SyncElemNodesNextFrame=function(bP,bQ){function bR(bS){a.requestAnimationFrame(function(){W.SyncElemNode(bP,bQ.Top);bS();});}return _6.BatchUpdatesEnabled()?bj.FromContinuations(function(bS,bT,bU){return bR.apply(null,[bS,bT,bU]);}):(W.SyncElemNode(bP,bQ.Top),bj.Return(null));};W.ComputeExitAnim=function(bP,bQ){return _5.Concat(q.map(function(bR){return _.GetExitAnim(bR.Attr);},bi.ToArray(bi.Except(bQ,bi.Filter(function(bR){return _.HasExitAnim(bR.Attr);},bP.PreviousNodes)))));};W.ComputeEnterAnim=function(bP,bQ){return _5.Concat(q.map(function(bR){return _.GetEnterAnim(bR.Attr);},bi.ToArray(bi.Except(bP.PreviousNodes,bi.Filter(function(bR){return _.HasEnterAnim(bR.Attr);},bQ)))));};W.ComputeChangeAnim=function(bP,bQ){var bR;function bS(bT){return _.HasChangeAnim(bT.Attr);}bR=function(bT){return bi.Filter(bS,bT);};return _5.Concat(q.map(function(bT){return _.GetChangeAnim(bT.Attr);},bi.ToArray(bi.Intersect(bR(bP.PreviousNodes),bR(bQ)))));};W.SyncElemNode=function(bP,bQ){!bP?W.SyncElement(bQ):void 0;W.Sync(bQ.Children);W.AfterRender(bQ);};W.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};W.UpdateTextNode=function(bP,bQ){bP.Value=bQ;bP.Dirty=true;};W.LinkPrevElement=function(bP,bQ){W.InsertDoc(bP.parentNode,bQ,bP);};W.SyncElement=function(bP){function bQ(bR){function bS(bT){var bU,bV;return bT!=null&&bT.$==0?bS(bT.$0)||bS(bT.$1):bT!=null&&bT.$==2?(bU=bT.$0,bU.Dirty||bS(bU.Current)):bT!=null&&bT.$==6&&(bV=bT.$0,bV.Dirty||q.exists(bQ,bV.Holes));}return bS(bR.Children);}_.Sync(bP.El,bP.Attr);bQ(bP)?W.DoSyncElement(bP):void 0;};W.Sync=function(bP){var bQ,bR;if(bP!=null&&bP.$==1)W.SyncElemNode(false,bP.$0);else if(bP!=null&&bP.$==2)W.Sync(bP.$0.Current);else if(bP==null);else if(bP!=null&&bP.$==5);else if(bP!=null&&bP.$==4){bQ=bP.$0;bQ.Dirty?(bQ.Text.nodeValue=bQ.Value,bQ.Dirty=false):void 0;}else if(bP!=null&&bP.$==6){bR=bP.$0;q.iter(function(bS){W.SyncElemNode(false,bS);},bR.Holes);q.iter(function(bS){_.Sync(bS[0],bS[1]);},bR.Attrs);W.AfterRender(bR);}else{W.Sync(bP.$0);W.Sync(bP.$1);}};W.AfterRender=function(bP){var bQ;bQ=bM.GetOptional(bP.Render);bQ!=null&&bQ.$==1?(bQ.$0(bP.El),bM.SetOptional(bP,"Render",null)):void 0;};W.DoSyncElement=function(bP){var bQ,bR,bS;function bT(bU,bV){var bW,bX;return bU!=null&&bU.$==1?bU.$0.El:bU!=null&&bU.$==2?(bW=bU.$0,bW.Dirty?(bW.Dirty=false,W.InsertDoc(bQ,bW.Current,bV)):bT(bW.Current,bV)):bU==null?bV:bU!=null&&bU.$==4?bU.$0.Text:bU!=null&&bU.$==5?bU.$0:bU!=null&&bU.$==6?(bX=bU.$0,(bX.Dirty?bX.Dirty=false:void 0,q.foldBack(function(bY,bZ){return bY==null||bY.constructor===H?bT(bY,bZ):bY;},bX.Els,bV))):bT(bU.$0,bT(bU.$1,bV));}bQ=bP.El;bB.Iter((bR=bP.El,function(bU){_3.RemoveNode(bR,bU);}),bB.Except(bB.DocChildren(bP),bB.Children(bP.El,bM.GetOptional(bP.Delimiters))));bT(bP.Children,(bS=bM.GetOptional(bP.Delimiters),bS!=null&&bS.$==1?bS.$0[1]:null));};X.$cctor=function(){X.$cctor=a.ignore;X.counter=0;};Y=f.DocElemNode=bM.Class({Equals:function(bP){return this.ElKey===bP.ElKey;},GetHashCode:function(){return this.ElKey;}},null,Y);Y.New=function(bP,bQ,bR,bS,bT,bU){var bV;return new Y((bV={Attr:bP,Children:bQ,El:bS,ElKey:bT},(bM.SetOptional(bV,"Delimiters",bR),bM.SetOptional(bV,"Render",bU),bV)));};_0=f.Elt=bM.Class({},D,_0);_0.TreeNode=function(bP,bQ){var bR,bS;function bT(bU){return bU[1];}bR=be.Create(bQ);return new _0.New$1({$:6,$0:bP},N.Map2Unit((bS=q.map(function(bU){return _.Updates(bT(bU));},bP.Attrs),bd.TreeReduce(N.Const(),N.Map2Unit,bS)),bR.v),q.get(bP.Els,0),bR);};_0.New$1=bM.Ctor(function(bP,bQ,bR,bS){D.New.call(this,bP,bQ);this.docNode$1=bP;this.updates$1=bQ;this.elt=bR;this.rvUpdates=bS;},_0);N.Const=function(bP){var bQ;bQ=v.New({$:0,$0:bP});return function(){return bQ;};};N.Sink=function(bP,bQ){function bR(){v.WhenRun(bQ(),bP,function(){bj.scheduler().Fork(bR);});}bj.scheduler().Fork(bR);};N.Map=function(bP,bQ){return N.CreateLazy(function(){return v.Map(bP,bQ());});};N.Map3=function(bP,bQ,bR,bS){return N.CreateLazy(function(){return v.Map3(bP,bQ(),bR(),bS());});};N.Sequence=function(bP){return N.CreateLazy(function(){return v.Sequence(J.map(function(bQ){return bQ();},bP));});};N.Map2=function(bP,bQ,bR){return N.CreateLazy(function(){return v.Map2(bP,bQ(),bR());});};N.Map2Unit=function(bP,bQ){return N.CreateLazy(function(){return v.Map2Unit(bP(),bQ());});};N.CreateLazy=function(bP){var bQ;bQ={c:null,o:bP};return function(){var bR,bS;bR=bQ.c;return bR===null?(bR=bQ.o(),bQ.c=bR,(bS=bR.s,bS!=null&&bS.$==0)?bQ.o=null:v.WhenObsoleteRun(bR,function(){bQ.c=null;}),bR):bR;};};_1.convertTextNode=function(bP){var bQ,bR,bS,bT,bU,bV;bQ=null;bR=0;bT=bP.textContent;bU=new a.RegExp(C.TextHoleRE(),"g");while(bQ=bU.exec(bT),bQ!==null){bP.parentNode.insertBefore(self.document.createTextNode(_2.string(bT,{$:1,$0:bR},{$:1,$0:bU.lastIndex-q.get(bQ,0).length-1})),bP);bR=bU.lastIndex;bV=self.document.createElement("span");bV.setAttribute("ws-replace",q.get(bQ,1).toLowerCase());bP.parentNode.insertBefore(bV,bP);}bU.lastIndex=0;bP.textContent=_2.string(bT,{$:1,$0:bR},null);};_1.failNotLoaded=function(bP){bN.warn("Instantiating non-loaded template",bP);};_1.fillTextHole=function(bP,bQ,bR){var bS;bS=bP.querySelector("[ws-replace]");return j.Equals(bS,null)?(bN.warn("Filling non-existent text hole",bR),null):(bS.parentNode.replaceChild(self.document.createTextNode(bQ),bS),{$:1,$0:bS.getAttribute("ws-replace")});};_1.removeHolesExcept=function(bP,bQ){function bR(bS){C.foreachNotPreserved(bP,"["+bS+"]",function(bT){if(!bQ.Contains(bT.getAttribute(bS)))bT.removeAttribute(bS);});}bR("ws-attr");bR("ws-onafterrender");bR("ws-var");C.foreachNotPreserved(bP,"[ws-hole]",function(bS){if(!bQ.Contains(bS.getAttribute("ws-hole"))){bS.removeAttribute("ws-hole");while(bS.hasChildNodes())bS.removeChild(bS.lastChild);}});C.foreachNotPreserved(bP,"[ws-replace]",function(bS){if(!bQ.Contains(bS.getAttribute("ws-replace")))bS.parentNode.removeChild(bS);});C.foreachNotPreserved(bP,"[ws-on]",function(bS){bS.setAttribute("ws-on",bc.concat(" ",q.filter(function(bT){return bQ.Contains(q.get(bc.SplitChars(bT,[":"],1),1));},bc.SplitChars(bS.getAttribute("ws-on"),[" "],1))));});C.foreachNotPreserved(bP,"[ws-attr-holes]",function(bS){var bT,bU,bV,bW,bX;bT=bc.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=q.get(bT,bU);bS.setAttribute(bW,(bX=new a.RegExp(C.TextHoleRE(),"g"),bS.getAttribute(bW).replace(bX,function(bY,bZ){return bQ.Contains(bZ)?bY:"";})));}});};_1.fillInstanceAttrs=function(bP,bQ){var bR,bS,bT,bU,bV;_1.convertAttrs(bQ);bR=bQ.nodeName.toLowerCase();bS=bP.querySelector("[ws-attr="+bR+"]");if(j.Equals(bS,null))bN.warn("Filling non-existent attr hole",bR);else{bS.removeAttribute("ws-attr");for(bT=0,bU=bQ.attributes.length-1;bT<=bU;bT++){bV=bQ.attributes.item(bT);bV.name==="class"&&bS.hasAttribute("class")?bS.setAttribute("class",bS.getAttribute("class")+" "+bV.nodeValue):bS.setAttribute(bV.name,bV.nodeValue);}}};_1.mapHoles=function(bP,bQ){function bR(bS){C.foreachNotPreserved(bP,"["+bS+"]",function(bT){var bU,bV;bU=(bV=null,[bQ.TryGetValue(bT.getAttribute(bS).toLowerCase(),{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?bT.setAttribute(bS,bU[1]):void 0;});}bR("ws-hole");bR("ws-replace");bR("ws-attr");bR("ws-onafterrender");bR("ws-var");C.foreachNotPreserved(bP,"[ws-on]",function(bS){bS.setAttribute("ws-on",bc.concat(" ",q.map(function(bT){var bU,bV,bW;bU=bc.SplitChars(bT,[":"],1);bV=(bW=null,[bQ.TryGetValue(q.get(bU,1),{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);return bV[0]?q.get(bU,0)+":"+bV[1]:bT;},bc.SplitChars(bS.getAttribute("ws-on"),[" "],1))));});C.foreachNotPreserved(bP,"[ws-attr-holes]",function(bS){var bT,bU,bV;bT=bc.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++)(function(){var bW;function bX(bY,bZ){var b0;b0=i.KeyValue(bZ);return bY.replace(new a.RegExp("\\${"+b0[0]+"}","ig"),"${"+b0[1]+"}");}bW=q.get(bT,bU);return bS.setAttribute(bW,(((bM.Curried3(J.fold))(bX))(bS.getAttribute(bW)))(bQ));}());});};_1.fill=function(bP,bQ,bR){while(true)if(bP.hasChildNodes())bR=bQ.insertBefore(bP.lastChild,bR);else return null;};_1.convertAttrs=function(bP){var bR,bS,bT,bU,bV,bW,bX,bY;function bQ(bZ){var b0;b0=bP.getAttribute(bZ);b0===null?void 0:bP.setAttribute(bZ,b0.toLowerCase());}bR=bP.attributes;bS=[];bT=[];bU=[];for(bV=0,bW=bR.length-1;bV<=bW;bV++){bX=bR.item(bV);bc.StartsWith(bX.nodeName,"ws-on")&&bX.nodeName!=="ws-onafterrender"&&bX.nodeName!=="ws-on"?(bS.push(bX.nodeName),bT.push(_2.string(bX.nodeName,{$:1,$0:"ws-on".length},null)+":"+bX.nodeValue.toLowerCase())):!bc.StartsWith(bX.nodeName,"ws-")&&(new a.RegExp(C.TextHoleRE())).test(bX.nodeValue)?(bX.nodeValue=(bY=new a.RegExp(C.TextHoleRE(),"g"),bX.nodeValue.replace(bY,function(bZ,b0){return"${"+b0.toLowerCase()+"}";})),bU.push(bX.nodeName)):void 0;}!(bT.length==0)?bP.setAttribute("ws-on",bc.concat(" ",bT)):void 0;!(bU.length==0)?bP.setAttribute("ws-attr-holes",bc.concat(" ",bU)):void 0;bQ("ws-hole");bQ("ws-replace");bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");q.iter(function(bZ){bP.removeAttribute(bZ);},bS);};_2.string=function(bP,bQ,bR){return bQ==null?bR!=null&&bR.$==1?bP.slice(0,bR.$0+1):"":bR==null?bP.slice(bQ.$0):bP.slice(bQ.$0,bR.$0+1);};_3.ParseHTMLIntoFakeRoot=function(bP){var bQ,bR,bS,bT,bU;bQ=self.document.createElement("div");return!_3.rhtml().test(bP)?(bQ.appendChild(self.document.createTextNode(bP)),bQ):(bR=(bS=_3.rtagName().exec(bP),j.Equals(bS,null)?"":q.get(bS,1).toLowerCase()),(bT=(bU=(_3.wrapMap())[bR],bU?bU:_3.defaultWrap()),(bQ.innerHTML=bT[1]+bP.replace(_3.rxhtmlTag(),"<$1></$2>")+bT[2],function(bV,bW){var bX;while(true)if(bW===0)return bV;else{bX=bW;bV=bV.lastChild;bW=bX-1;}}(bQ,bT[0]))));};_3.ChildrenArray=function(bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.childNodes.length-1;bR<=bS;bR++)bQ.push(bP.childNodes[bR]);return bQ;};_3.rhtml=function(){bo.$cctor();return bo.rhtml;};_3.wrapMap=function(){bo.$cctor();return bo.wrapMap;};_3.defaultWrap=function(){bo.$cctor();return bo.defaultWrap;};_3.rxhtmlTag=function(){bo.$cctor();return bo.rxhtmlTag;};_3.rtagName=function(){bo.$cctor();return bo.rtagName;};_3.IterSelector=function(bP,bQ,bR){var bS,bT,bU;bS=bP.querySelectorAll(bQ);for(bT=0,bU=bS.length-1;bT<=bU;bT++)bR(bS[bT]);};_3.InsertAt=function(bP,bQ,bR){var bS;if(!(bR.parentNode===bP&&bQ===(bS=bR.nextSibling,j.Equals(bS,null)?null:bS)))bP.insertBefore(bR,bQ);};_3.RemoveNode=function(bP,bQ){if(bQ.parentNode===bP)bP.removeChild(bQ);};J.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};_4=z.KeyCollection=bM.Class({GetEnumerator$1:function(){return S.Get(J.map(function(bP){return bP.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,_4);_4.New=bM.Ctor(function(bP){e.New.call(this);this.d=bP;},_4);_5.get_UseAnimations=function(){return bk.UseAnimations();};_5.Play=function(bP){var bQ;bQ=null;return bj.Delay(function(){return bj.Bind(_5.Run(a.ignore,bk.Actions(bP)),function(){bk.Finalize(bP);return bj.Return(null);});});};_5.Append=function(bP,bQ){return{$:0,$0:bq.Append(bP.$0,bQ.$0)};};_5.Run=function(bP,bQ){var bR;function bS(bT){function bU(bV,bW){var bX;bX=bW-bV;bQ.Compute(bX);bP();return bX<=bR?void a.requestAnimationFrame(function(bY){bU(bV,bY);}):bT();}a.requestAnimationFrame(function(bV){bU(bV,bV);});}bR=bQ.Duration;return bR===0?bj.Zero():bj.FromContinuations(function(bT,bU,bV){return bS.apply(null,[bT,bU,bV]);});};_5.Concat=function(bP){return{$:0,$0:bq.Concat(J.map(bk.List,bP))};};_5.get_Empty=function(){return{$:0,$0:bq.Empty()};};_6.BatchUpdatesEnabled=function(){bl.$cctor();return bl.BatchUpdatesEnabled;};_7.StartProcessor=function(bP){var bQ;function bR(){var bS;bS=null;return bj.Delay(function(){return bj.Bind(bP,function(){var bT;bT=bQ[0];return bT===1?(bQ[0]=0,bj.Zero()):bT===2?(bQ[0]=1,bR()):bj.Zero();});});}bQ=[0];return function(){var bS;bS=bQ[0];bS===0?(bQ[0]=1,bj.Start(bR(),null)):bS===1?bQ[0]=2:void 0;};};_9.New=function(bP,bQ,bR,bS){var bT;bT={DynElem:bP,DynFlags:bQ,DynNodes:bR};bM.SetOptional(bT,"OnAfterRender",bS);return bT;};_.Insert=function(bP,bQ){var bR,bS,bT;function bU(bV){if(!(bV===null))if(bV!=null&&bV.$==1)bR.push(bV.$0);else if(bV!=null&&bV.$==2){bU(bV.$0);bU(bV.$1);}else if(bV!=null&&bV.$==3)bV.$0(bP);else if(bV!=null&&bV.$==4)bS.push(bV.$0);}bR=[];bS=[];bU(bQ);bT=bR.slice(0);return _9.New(bP,_.Flags(bQ),bT,bS.length===0?null:{$:1,$0:function(bV){J.iter(function(bW){bW(bV);},bS);}});};_.Updates=function(bP){return bd.MapTreeReduce(function(bQ){return bQ.NChanged();},N.Const(),N.Map2Unit,bP.DynNodes);};_.Empty=function(bP){return _9.New(bP,0,[],null);};_.Flags=function(bP){return bP!==null&&bP.hasOwnProperty("flags")?bP.flags:0;};_.Static=function(bP){return new P({$:3,$0:bP});};_.Dynamic=function(bP,bQ){return new P({$:1,$0:new bs.New(bP,bQ)});};_.EmptyAttr=function(){br.$cctor();return br.EmptyAttr;};_.HasExitAnim=function(bP){var bQ;bQ=2;return(bP.DynFlags&bQ)===bQ;};_.GetExitAnim=function(bP){return _.GetAnim(bP,function(bQ,bR){return bQ.NGetExitAnim(bR);});};_.HasEnterAnim=function(bP){var bQ;bQ=1;return(bP.DynFlags&bQ)===bQ;};_.GetEnterAnim=function(bP){return _.GetAnim(bP,function(bQ,bR){return bQ.NGetEnterAnim(bR);});};_.HasChangeAnim=function(bP){var bQ;bQ=4;return(bP.DynFlags&bQ)===bQ;};_.GetChangeAnim=function(bP){return _.GetAnim(bP,function(bQ,bR){return bQ.NGetChangeAnim(bR);});};_.AppendTree=function(bP,bQ){var bR;return bP===null?bQ:bQ===null?bP:(bR=new P({$:2,$0:bP,$1:bQ}),(_.SetFlags(bR,_.Flags(bP)|_.Flags(bQ)),bR));};_.GetAnim=function(bP,bQ){return _5.Concat(q.map(function(bR){return bQ(bR,bP.DynElem);},bP.DynNodes));};_.Sync=function(bP,bQ){q.iter(function(bR){bR.NSync(bP);},bQ.DynNodes);};_.SetFlags=function(bP,bQ){bP.flags=bQ;};$.Handler=function(bP,bQ){return _.Static(function(bR){bR.addEventListener(bP,function(bS){return(bQ(bR))(bS);},false);});};$.OnAfterRender=function(bP){return new P({$:4,$0:bP});};$.Value=function(bP){var bQ;bQ=(((bn.StringApply())(bP))(_.Static))(function(bR){return $.DynamicCustom(bR,bP.get_View());});return P.Append(bQ[0],bQ[1]);};$.Checked=function(bP){var bQ;bQ=(((bn.BoolCheckedApply())(bP))(_.Static))(function(bR){return $.DynamicCustom(bR,bP.get_View());});return P.Append(bQ[0],bQ[1]);};$.IntValue=function(bP){var bQ;bQ=(((bn.IntApplyChecked())(bP))(_.Static))(function(bR){return $.DynamicCustom(bR,bP.get_View());});return P.Append(bQ[0],bQ[1]);};$.IntValueUnchecked=function(bP){var bQ;bQ=(((bn.IntApplyUnchecked())(bP))(_.Static))(function(bR){return $.DynamicCustom(bR,bP.get_View());});return P.Append(bQ[0],bQ[1]);};$.FloatValue=function(bP){var bQ;bQ=(((bn.FloatApplyChecked())(bP))(_.Static))(function(bR){return $.DynamicCustom(bR,bP.get_View());});return P.Append(bQ[0],bQ[1]);};$.FloatValueUnchecked=function(bP){var bQ;bQ=(((bn.FloatApplyUnchecked())(bP))(_.Static))(function(bR){return $.DynamicCustom(bR,bP.get_View());});return P.Append(bQ[0],bQ[1]);};$.Dynamic=function(bP,bQ){return _.Dynamic(bQ,function(bR){return function(bS){return bR.setAttribute(bP,bS);};});};$.DynamicCustom=function(bP,bQ){return _.Dynamic(bQ,bP);};bb=ba.T=bM.Class({GetEnumerator:function(){return new T.New(this,null,function(bP){var bQ;bQ=bP.s;return bQ.$==0?false:(bP.c=bQ.$0,bP.s=bQ.$1,true);},void 0);},GetEnumerator0:function(){return S.Get(this);}},null,bb);bb.Empty=new bb({$:0});bc.concat=function(bP,bQ){return q.ofSeq(bQ).join(bP);};bc.SplitChars=function(bP,bQ,bR){return bc.Split(bP,new a.RegExp("["+bc.RegexEscape(bQ.join(""))+"]"),bR);};bc.StartsWith=function(bP,bQ){return bP.substring(0,bQ.length)==bQ;};bc.Split=function(bP,bQ,bR){return bR===1?q.filter(function(bS){return bS!=="";},bc.SplitWith(bP,bQ)):bc.SplitWith(bP,bQ);};bc.RegexEscape=function(bP){return bP.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bc.SplitWith=function(bP,bQ){return bP.split(bQ);};bc.forall=function(bP,bQ){return J.forall(bP,bc.protect(bQ));};bc.protect=function(bP){return bP===null?"":bP;};bd.TreeReduce=function(bP,bQ,bR){var bS;function bT(bU,bV){var bW,bX;return bV<=0?bP:bV===1&&(bU>=0&&bU<bS)?q.get(bR,bU):(bX=bV/2>>0,bQ(bT(bU,bX),bT(bU+bX,bV-bX)));}bS=q.length(bR);return bT(0,bS);};bd.MapTreeReduce=function(bP,bQ,bR,bS){var bT;function bU(bV,bW){var bX,bY;return bW<=0?bQ:bW===1&&(bV>=0&&bV<bT)?bP(q.get(bS,bV)):(bY=bW/2>>0,bR(bU(bV,bY),bU(bV+bY,bW-bY)));}bT=q.length(bS);return bU(0,bT);};bd.ofSeqNonCopying=function(bP){var bQ,bR;if(bP instanceof a.Array)return bP;else if(bP instanceof bb)return q.ofList(bP);else if(bP===null)return[];else{bQ=[];bR=S.Get(bP);try{while(bR.MoveNext())bQ.push(bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};be=f.Updates=bM.Class({},null,be);be.Create=function(bP){var bQ;bQ=null;bQ=be.New(bP,null,function(){var bR;bR=bQ.s;return bR===null?(bR=v.Copy(bQ.c()),bQ.s=bR,v.WhenObsoleteRun(bR,function(){bQ.s=null;}),bR):bR;});return bQ;};be.New=function(bP,bQ,bR){return new be({c:bP,s:bQ,v:bR});};bf=z.ValueCollection=bM.Class({GetEnumerator$1:function(){return S.Get(J.map(function(bP){return bP.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,bf);bf.New=bM.Ctor(function(bP){e.New.call(this);this.d=bP;},bf);bh.New=function(bP,bQ){return{PreviousNodes:bP,Top:bQ};};bi.get_Empty=function(){return{$:0,$0:new I.New$3()};};bi.FindAll=function(bP){var bQ;function bR(bT){if(bT!=null&&bT.$==0){bR(bT.$0);bR(bT.$1);}else if(bT!=null&&bT.$==1)bS(bT.$0);else if(bT!=null&&bT.$==2)bR(bT.$0.Current);else if(bT!=null&&bT.$==6)q.iter(bS,bT.$0.Holes);}function bS(bT){bQ.push(bT);bR(bT.Children);}bQ=[];bR(bP);return{$:0,$0:new I.New$2(bQ)};};bi.Filter=function(bP,bQ){return{$:0,$0:by.Filter(bP,bQ.$0)};};bi.Except=function(bP,bQ){return{$:0,$0:by.Except(bP.$0,bQ.$0)};};bi.ToArray=function(bP){return by.ToArray(bP.$0);};bi.Intersect=function(bP,bQ){return{$:0,$0:by.Intersect(bP.$0,bQ.$0)};};bj.Delay=function(bP){return function(bQ){try{(bP(null))(bQ);}catch(bR){bQ.k({$:1,$0:bR});}};};bj.Bind=function(bP,bQ){return bj.checkCancel(function(bR){bP(bv.New(function(bS){var bT;if(bS.$==0){bT=bS.$0;bj.scheduler().Fork(function(){try{(bQ(bT))(bR);}catch(bU){bR.k({$:1,$0:bU});}});}else bj.scheduler().Fork(function(){bR.k(bS);});},bR.ct));});};bj.Zero=function(){bw.$cctor();return bw.Zero;};bj.Start=function(bP,bQ){var bR,bS;bR=(bS=(bj.defCTS())[0],bQ==null?bS:bQ.$0);bj.scheduler().Fork(function(){if(!bR.c)bP(bv.New(function(bT){if(bT.$==1)bj.UncaughtAsyncError(bT.$0);},bR));});};bj.Return=function(bP){return function(bQ){bQ.k({$:0,$0:bP});};};bj.scheduler=function(){bw.$cctor();return bw.scheduler;};bj.checkCancel=function(bP){return function(bQ){if(bQ.ct.c)bj.cancel(bQ);else bP(bQ);};};bj.defCTS=function(){bw.$cctor();return bw.defCTS;};bj.UncaughtAsyncError=function(bP){bN.log("WebSharper: Uncaught asynchronous exception",bP);};bj.FromContinuations=function(bP){return function(bQ){var bR;function bS(bT){if(bR[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bR[0]=true;bj.scheduler().Fork(bT);}}bR=[false];bP(function(bT){bS(function(){bQ.k({$:0,$0:bT});});},function(bT){bS(function(){bQ.k({$:1,$0:bT});});},function(bT){bS(function(){bQ.k({$:2,$0:bT});});});};};bj.cancel=function(bP){bP.k({$:2,$0:new bE.New(bP.ct)});};bk.UseAnimations=function(){bp.$cctor();return bp.UseAnimations;};bk.Actions=function(bP){return bk.ConcatActions(q.choose(function(bQ){return bQ.$==1?{$:1,$0:bQ.$0}:null;},bq.ToArray(bP.$0)));};bk.Finalize=function(bP){q.iter(function(bQ){if(bQ.$==0)bQ.$0();},bq.ToArray(bP.$0));};bk.ConcatActions=function(bP){var bQ,bR,bS,bT;bQ=bd.ofSeqNonCopying(bP);bR=q.length(bQ);return bR===0?bk.Const():bR===1?q.get(bQ,0):(bS=J.max(J.map(function(bU){return bU.Duration;},bQ)),(bT=q.map(function(bU){return bk.Prolong(bS,bU);},bQ),bk.Def(bS,function(bU){q.iter(function(bV){bV.Compute(bU);},bT);})));};bk.List=function(bP){return bP.$0;};bk.Const=function(bP){return bk.Def(0,function(){return bP;});};bk.Def=function(bP,bQ){return{Compute:bQ,Duration:bP};};bk.Prolong=function(bP,bQ){var bR,bS,bT;bR=bQ.Compute;bS=bQ.Duration;bT=bF.Create(function(){return bQ.Compute(bQ.Duration);});return{Compute:function(bU){return bU>=bS?bT.f():bR(bU);},Duration:bP};};bl.$cctor=function(){bl.$cctor=a.ignore;bl.BatchUpdatesEnabled=true;};bm.concat=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push.apply(bQ,bP[bS]);return bQ;};bn.StringApply=function(){br.$cctor();return br.StringApply;};bn.BoolCheckedApply=function(){br.$cctor();return br.BoolCheckedApply;};bn.IntApplyChecked=function(){br.$cctor();return br.IntApplyChecked;};bn.IntApplyUnchecked=function(){br.$cctor();return br.IntApplyUnchecked;};bn.FloatApplyChecked=function(){br.$cctor();return br.FloatApplyChecked;};bn.FloatApplyUnchecked=function(){br.$cctor();return br.FloatApplyUnchecked;};bn.ApplyValue=function(bP,bQ,bR,bS,bT){return[bS(function(bU){function bV(){bR.UpdateMaybe(function(bW){var bX,bY;bX=bP(bU);return bX!=null&&bX.$==1&&(!j.Equals(bX.$0,bW)&&(bY=[bX,bX.$0],true))?bY[0]:null;});}bU.addEventListener("change",bV);bU.addEventListener("input",bV);bU.addEventListener("keypress",bV);}),bT(function(bU){return function(bV){var bW,bX;bW=bP(bU);return bW!=null&&bW.$==1&&(j.Equals(bW.$0,bV)&&(bX=bW.$0,true))?null:bQ(bU,bV);};})];};bn.StringSet=function(){br.$cctor();return br.StringSet;};bn.StringGet=function(){br.$cctor();return br.StringGet;};bn.IntSetUnchecked=function(){br.$cctor();return br.IntSetUnchecked;};bn.IntGetUnchecked=function(){br.$cctor();return br.IntGetUnchecked;};bn.IntSetChecked=function(){br.$cctor();return br.IntSetChecked;};bn.IntGetChecked=function(){br.$cctor();return br.IntGetChecked;};bn.FloatSetUnchecked=function(){br.$cctor();return br.FloatSetUnchecked;};bn.FloatGetUnchecked=function(){br.$cctor();return br.FloatGetUnchecked;};bn.FloatSetChecked=function(){br.$cctor();return br.FloatSetChecked;};bn.FloatGetChecked=function(){br.$cctor();return br.FloatGetChecked;};bo.$cctor=function(){var bP;bo.$cctor=a.ignore;bo.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bo.rtagName=new a.RegExp("<([\\w:]+)");bo.rhtml=new a.RegExp("<|&#?\\w+;");bo.wrapMap=(bP=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bP,tbody:bP,tfoot:bP,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bo.defaultWrap=[0,"",""];};bp.$cctor=function(){bp.$cctor=a.ignore;bp.CubicInOut=bu.Custom(function(bP){var bQ;bQ=bP*bP;return 3*bQ-2*(bQ*bP);});bp.UseAnimations=true;};bq.Append=function(bP,bQ){return bP.$==0?bQ:bQ.$==0?bP:{$:2,$0:bP,$1:bQ};};bq.ToArray=function(bP){var bQ;function bR(bS){if(bS.$==1)bQ.push(bS.$0);else if(bS.$==2){bR(bS.$0);bR(bS.$1);}else if(bS.$==3)q.iter(function(bT){bQ.push(bT);},bS.$0);}bQ=[];bR(bP);return bQ.slice(0);};bq.Concat=function(bP){var bQ;bQ=bd.ofSeqNonCopying(bP);return bd.TreeReduce(bq.Empty(),bq.Append,bQ);};bq.Empty=function(){bG.$cctor();return bG.Empty;};br.$cctor=function(){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY;br.$cctor=a.ignore;br.EmptyAttr=null;br.BoolCheckedApply=bM.Curried3(function(bZ,b0,b1){return[b0(function(b2){b2.addEventListener("change",function(){return!j.Equals(bZ.Get(),b2.checked)?bZ.Set(b2.checked):null;});}),b1(function(b2){return function(b3){b2.checked=b3;};})];});br.StringSet=function(bZ){return function(b0){bZ.value=b0;};};br.StringGet=function(bZ){return{$:1,$0:bZ.value};};br.StringApply=(bP=bn.StringGet(),(bQ=bn.StringSet(),bM.Curried(bn.ApplyValue,3,[bP,function(bZ,b0){return(bQ(bZ))(b0);}])));br.IntSetUnchecked=function(bZ){return function(b0){bZ.value=a.String(b0);};};br.IntGetUnchecked=function(bZ){var b0,b1;b0=bZ.value;return bz.isBlank(b0)?{$:1,$0:0}:(b1=+b0,b1!==b1>>0?null:{$:1,$0:b1});};br.IntApplyUnchecked=(bR=bn.IntGetUnchecked(),(bS=bn.IntSetUnchecked(),bM.Curried(bn.ApplyValue,3,[bR,function(bZ,b0){return(bS(bZ))(b0);}])));br.IntSetChecked=function(bZ){return function(b0){var b1;b1=b0.get_Input();return bZ.value!==b1?void(bZ.value=b1):null;};};br.IntGetChecked=function(bZ){var b0,b1,b2;b0=bZ.value;return{$:1,$0:bz.isBlank(b0)?(bZ.checkValidity?bZ.checkValidity():true)?new Q({$:2,$0:b0}):new Q({$:1,$0:b0}):(b1=(b2=0,[O.TryParseInt32(b0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]),b1[0]?new Q({$:0,$0:b1[1],$1:b0}):new Q({$:1,$0:b0}))};};br.IntApplyChecked=(bT=bn.IntGetChecked(),(bU=bn.IntSetChecked(),bM.Curried(bn.ApplyValue,3,[bT,function(bZ,b0){return(bU(bZ))(b0);}])));br.FloatSetUnchecked=function(bZ){return function(b0){bZ.value=a.String(b0);};};br.FloatGetUnchecked=function(bZ){var b0,b1;b0=bZ.value;return bz.isBlank(b0)?{$:1,$0:0}:(b1=+b0,a.isNaN(b1)?null:{$:1,$0:b1});};br.FloatApplyUnchecked=(bV=bn.FloatGetUnchecked(),(bW=bn.FloatSetUnchecked(),bM.Curried(bn.ApplyValue,3,[bV,function(bZ,b0){return(bW(bZ))(b0);}])));br.FloatSetChecked=function(bZ){return function(b0){var b1;b1=b0.get_Input();return bZ.value!==b1?void(bZ.value=b1):null;};};br.FloatGetChecked=function(bZ){var b0,b1;b0=bZ.value;return{$:1,$0:bz.isBlank(b0)?(bZ.checkValidity?bZ.checkValidity():true)?new Q({$:2,$0:b0}):new Q({$:1,$0:b0}):(b1=+b0,a.isNaN(b1)?new Q({$:1,$0:b0}):new Q({$:0,$0:b1,$1:b0}))};};br.FloatApplyChecked=(bX=bn.FloatGetChecked(),(bY=bn.FloatSetChecked(),bM.Curried(bn.ApplyValue,3,[bX,function(bZ,b0){return(bY(bZ))(b0);}])));};bs=f.DynamicAttrNode=bM.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bP){return _5.get_Empty();},NGetEnterAnim:function(bP){return _5.get_Empty();},NGetChangeAnim:function(bP){return _5.get_Empty();},NSync:function(bP){if(this.dirty){(this.push(bP))(this.value);this.dirty=false;}}},e,bs);bs.New=bM.Ctor(function(bP,bQ){var bR;bR=this;e.New.call(this);this.push=bQ;this.value=void 0;this.dirty=false;this.updates=N.Map(function(bS){bR.value=bS;bR.dirty=true;},bP);},bs);bt=bj.Scheduler=bM.Class({Fork:function(bP){var bQ;bQ=this;this.robin.push(bP);this.idle?(this.idle=false,a.setTimeout(function(){bQ.tick();},0)):void 0;},tick:function(){var bP,bQ,bR;bQ=this;bR=bO.now();bP=true;while(bP)if(this.robin.length===0){this.idle=true;bP=false;}else{(this.robin.shift())();bO.now()-bR>40?(a.setTimeout(function(){bQ.tick();},0),bP=false):void 0;}}},e,bt);bt.New=bM.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},bt);bu=f.Easing=bM.Class({},e,bu);bu.Custom=function(bP){return new bu.New(bP);};bu.New=bM.Ctor(function(bP){e.New.call(this);this.transformTime=bP;},bu);bv.New=function(bP,bQ){return{k:bP,ct:bQ};};bw.$cctor=function(){bw.$cctor=a.ignore;bw.noneCT=bx.New(false,[]);bw.scheduler=new bt.New();bw.defCTS=[new bA.New()];bw.Zero=bj.Return();bw.GetCT=function(bP){bP.k({$:0,$0:bP.ct});};};bx.New=function(bP,bQ){return{c:bP,r:bQ};};by.Filter=function(bP,bQ){return new I.New$2(q.filter(bP,by.ToArray(bQ)));};by.Except=function(bP,bQ){var bR;bR=new I.New$2(by.ToArray(bQ));bR.ExceptWith(by.ToArray(bP));return bR;};by.ToArray=function(bP){var bQ;bQ=q.create(bP.get_Count(),void 0);bP.CopyTo(bQ);return bQ;};by.Intersect=function(bP,bQ){var bR;bR=new I.New$2(by.ToArray(bP));bR.IntersectWith(by.ToArray(bQ));return bR;};ba.head=function(bP){return bP.$==1?bP.$0:ba.listEmpty();};ba.tail=function(bP){return bP.$==1?bP.$1:ba.listEmpty();};ba.listEmpty=function(){return i.FailWith("The input list was empty.");};bz.isBlank=function(bP){return bc.forall(bC.IsWhiteSpace,bP);};bA=d.CancellationTokenSource=bM.Class({},e,bA);bA.New=bM.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bA);bB.Children=function(bP,bQ){var bR,bS,bT;if(bQ!=null&&bQ.$==1){bT=[];bR=bQ.$0[0].nextSibling;while(bR!==bQ.$0[1]){bT.push(bR);bR=bR.nextSibling;}return{$:0,$0:bT};}else return{$:0,$0:q.init(bP.childNodes.length,(bS=bP.childNodes,function(bU){return bS[bU];}))};};bB.Except=function(bP,bQ){var bR;bR=bP.$0;return{$:0,$0:q.filter(function(bS){return q.forall(function(bT){return!(bS===bT);},bR);},bQ.$0)};};bB.Iter=function(bP,bQ){q.iter(bP,bQ.$0);};bB.DocChildren=function(bP){var bQ;function bR(bS){if(bS!=null&&bS.$==2)bR(bS.$0.Current);else if(bS!=null&&bS.$==1)bQ.push(bS.$0.El);else if(bS==null);else if(bS!=null&&bS.$==5)bQ.push(bS.$0);else if(bS!=null&&bS.$==4)bQ.push(bS.$0.Text);else if(bS!=null&&bS.$==6)q.iter(function(bT){if(bT==null||bT.constructor===H)bR(bT);else bQ.push(bT);},bS.$0.Els);else{bR(bS.$0);bR(bS.$1);}}bQ=[];bR(bP.Children);return{$:0,$0:bd.ofSeqNonCopying(bQ)};};bC.IsWhiteSpace=function(bP){return bP.match(new a.RegExp("\\s"))!==null;};O.TryParse=function(bP,bQ,bR,bS){var bT,bU;bT=+bP;bU=bT===bT-bT%1&&bT>=bQ&&bT<=bR;bU?bS.set(bT):void 0;return bU;};bE=d.OperationCanceledException=bM.Class({},bD,bE);bE.New=bM.Ctor(function(bP){bE.New$1.call(this,"The operation was canceled.",null,bP);},bE);bE.New$1=bM.Ctor(function(bP,bQ,bR){this.message=bP;this.inner=bQ;H.setPrototypeOf(this,bE.prototype);this.ct=bR;},bE);bF.Create=function(bP){return bJ.New(false,bP,bF.forceLazy);};bF.forceLazy=function(){var bP;bP=this.v();this.c=true;this.v=bP;this.f=bF.cachedLazy;return bP;};bF.cachedLazy=function(){return this.v;};bG.$cctor=function(){bG.$cctor=a.ignore;bG.Empty={$:0};};bH.Clear=function(bP){bP.splice(0,q.length(bP));};bJ.New=function(bP,bQ,bR){return{c:bP,v:bQ,f:bR};};bM.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
